(this["webpackJsonpcontact-book-client"]=this["webpackJsonpcontact-book-client"]||[]).push([[0],{281:function(e,t,a){e.exports=a(540)},539:function(e,t,a){},540:function(e,t,a){"use strict";a.r(t);var n=a(10),r=a.n(n),o=a(26),c=a(14),l=a(0),u=a.n(l),i=a(42),s=a.n(i),m=a(31),d=a(32),f=a(34),p=a(33),h=a(49),g=a(270),b=a(561),E=a(560),v=a(562),O=a(556),j=a(557),y=function(){var e=Object(c.a)(r.a.mark((function e(t){var a,n,c,l,u,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.method,n=t.url,c=t.body,l=t.type,u=void 0===l?"application/json":l,e.next=3,fetch(n,Object(o.a)({method:a,headers:Object(o.a)({},u?{"Content-Type":u}:{})},c?{body:c}:{})).then((function(e){return e.json()}));case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(c.a)(r.a.mark((function e(t){var a,n,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,n=t.password,e.next=3,y({method:"POST",url:"/api/user/login",body:JSON.stringify({email:a,password:n})});case 3:return o=e.sent,e.abrupt("return",o);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(c.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y({method:"POST",url:"/api/user/register",body:JSON.stringify(t)});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(c.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y({method:"PUT",url:"/api/user/update",body:JSON.stringify(t)});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y({method:"POST",url:"/api/user/logout"});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(c.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y({method:"GET",url:"/api/user/profile?email=".concat(t)});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=a(7),N=a(552),A=a(43),I=a.n(A),P=function(e){var t=e.login,a=e.set,n=Object(l.useState)(""),o=Object(T.a)(n,2),i=o[0],s=o[1],m=Object(l.useState)(""),d=Object(T.a)(m,2),f=d[0],p=d[1],h=Object(l.useState)(!0),g=Object(T.a)(h,2),b=g[0],E=g[1],v=Object(l.useState)(!0),O=Object(T.a)(v,2),y=O[0],w=O[1],C=Object(l.useState)(!1),k=Object(T.a)(C,2),S=k[0],x=k[1],A=function(){var e=Object(c.a)(r.a.mark((function e(){var n,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=b&&y,i&&f&&n&&!S){e.next=3;break}return e.abrupt("return");case 3:return x(!0),e.next=6,t({email:i,password:f});case 6:o=e.sent,x(!1),o.message?alert(o.message):o.user&&(localStorage.setItem("user",JSON.stringify(o.user)),a(o.user),window.location.href="/");case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return u.a.createElement(N.a,{onSubmit:A},u.a.createElement(N.a.Input,{icon:"at",type:"email",iconPosition:"left",placeholder:"Email",error:!b,fluid:!0,onChange:function(e){return t=e.target.value,s(t),void E(!0);var t},onBlur:function(){return E(I.a.isEmail(i))}}),u.a.createElement(N.a.Input,{icon:"lock",type:"password",iconPosition:"left",placeholder:"Password",error:!y,fluid:!0,onChange:function(e){return t=e.target.value,p(t),void w(!0);var t},onBlur:function(){return w(Boolean(f))}}),u.a.createElement(j.a,{color:"teal",size:"large",fluid:!0,primary:!0,type:"submit",loading:S,disabled:!Boolean(i&&f)},"Log in"))},D=a(22),B=function(e){return{type:"PROFILE:SET",profile:e}},F=function(e){return{type:"EXP_CONTACT:SET",contact:e}},z=a(271),V=function(e){var t=e.noImage,a=void 0!==t&&t;return u.a.createElement(E.a,{as:"h2",color:"teal",size:"huge",style:{marginBottom:50}},a?"":u.a.createElement(z.a,{src:"http://s1.iconbird.com/ico/2013/7/390/w256h2561372777054AddressBook.png",alt:"book"}),u.a.createElement("br",null),"Contact Book",u.a.createElement(E.a.Subheader,null,"A notebook for your contacts"))},L=Object(D.b)((function(){return{}}),(function(e){return{setProfile:function(t){return e(B(t))}}}))((function(e){var t=e.setProfile;return document.title="Contact Book | Log in",u.a.createElement(b.a,{textAlign:"center",verticalAlign:"middle",className:"fill"},u.a.createElement(b.a.Column,{style:{maxWidth:450}},u.a.createElement(V,null),u.a.createElement(E.a,{as:"h2",color:"olive"},"Log in to your account"),u.a.createElement(v.a,null,u.a.createElement(P,{login:w,set:t})),u.a.createElement(O.a,null,u.a.createElement(O.a.Header,null,"New to us?"),u.a.createElement(O.a.Content,null,u.a.createElement(j.a,{onClick:function(){return window.location.href="/register"},compact:!0,size:"mini",color:"teal",style:{marginTop:10}},"Sign up")))))})),q=a(553),_=Object(D.b)((function(e){return{user:e.profile.profile}}))((function(e){var t=e.user;return u.a.createElement(v.a,null,u.a.createElement(E.a,{textAlign:"center",size:"huge"},"Your Contact Book profile info"),u.a.createElement(b.a,{columns:"2",textAlign:"center",verticalAlign:"middle"},u.a.createElement(b.a.Column,null,t.firstName?u.a.createElement("p",null,"First name: ",t.firstName):"",t.lastName?u.a.createElement("p",null,"Last name: ",t.lastName):""),u.a.createElement(b.a.Column,null,u.a.createElement("p",null,"Email: ",t.email))),u.a.createElement(z.a,{centered:!0,circular:!0,src:t.photo.url,alt:"Profile photo"}))})),G=Object(D.b)((function(e){return{user:e.profile.profile}}))((function(e){var t=e.user;return u.a.createElement(b.a,{centered:!0,columns:"2",style:{padding:"1em 0",backgroundColor:"white"},verticalAlign:"middle"},u.a.createElement(b.a.Column,{textAlign:"center",verticalAlign:"middle"},u.a.createElement(E.a,null,u.a.createElement(z.a,{src:t.photo.url,circular:!0,size:"massive",alt:"Profile avatar"})," ",t.firstName&&(t.lastName,1)?t.firstName+" "+(t.lastName||""):t.email)),u.a.createElement(b.a.Column,{textAlign:"center",verticalAlign:"middle"},u.a.createElement(j.a.Group,null,u.a.createElement(j.a,{icon:"sign out alternate",color:"red",size:"large",onClick:function(){S().then((function(){localStorage.clear(),window.location.reload()}))}}),u.a.createElement(j.a,{icon:"refresh",color:"yellow",size:"large",onClick:function(){return window.location.href="/update"}}),u.a.createElement(q.a,{openOnTriggerClick:!0,closeIcon:!0,dimmer:"blurring",trigger:u.a.createElement(j.a,{icon:"info",positive:!0,size:"large"})},u.a.createElement(q.a.Header,null,"Profile"),u.a.createElement(q.a.Content,null,u.a.createElement(_,null))))))})),J=function(){var e=Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y({url:"/api/contact",method:"GET"});case 2:return t=e.sent,e.abrupt("return",t.contacts);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(c.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y({url:"/api/contact/".concat(t),method:"GET"});case 2:return a=e.sent,e.abrupt("return",a.contact);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(c.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y({url:"/api/contact/register",method:"POST",body:JSON.stringify(t)});case 2:return a=e.sent,e.abrupt("return",a.contact);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(c.a)(r.a.mark((function e(t,a){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y({url:"/api/contact/update",method:"PUT",body:JSON.stringify({id:t,data:a})});case 2:return n=e.sent,e.abrupt("return",n.contact);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),H=function(){var e=Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y({url:"/api/contact/birthdays?tz="+Intl.DateTimeFormat().resolvedOptions().timeZone,method:"GET"});case 2:return t=e.sent,e.abrupt("return",t.contacts);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=Object(c.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y({url:"/api/contact/delete",method:"DELETE",body:JSON.stringify({id:t})});case 2:return a=e.sent,e.abrupt("return",a.contact);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(c.a)(r.a.mark((function e(t,a){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y({url:"/api/contact/share",method:"POST",body:JSON.stringify({id:t,userEmail:a})});case 2:(n=e.sent).message&&console.error(n.message);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),X=a(550),Z=a(125),$=function(e){var t=e.contact,a=e.onClick;return u.a.createElement(v.a,{onClick:a(t),style:{backgroundColor:t.favorite?"yellow":"while"}},u.a.createElement(b.a,{textAlign:"center",verticalAlign:"middle",columns:"3"},u.a.createElement(b.a.Column,null,u.a.createElement(b.a,{columns:"2",verticalAlign:"middle"},u.a.createElement(b.a.Column,null,u.a.createElement(z.a,{src:t.photo.url,alt:"Contact photo",circular:!0,size:"tiny"})),u.a.createElement(b.a.Column,null,u.a.createElement(E.a,null,(t.firstName||"")+" "+(t.lastName||""))))),u.a.createElement(b.a.Column,null,u.a.createElement(Z.a,{color:"green"},t.category.name),t.who?u.a.createElement(Z.a,{color:"red"},t.who):"")))},K=a(57),Q=a(548),ee=function(){var e=Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y({url:"/api/category",method:"GET"});case 2:return t=e.sent,e.abrupt("return",t.categories);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),te=function(){var e=Object(c.a)(r.a.mark((function e(t){var a,n,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.name,n=t.about,e.next=3,y({url:"/api/category/register",method:"POST",body:JSON.stringify({name:a,about:n})});case 3:return o=e.sent,e.abrupt("return",o.category);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ae=function(){var e=Object(c.a)(r.a.mark((function e(t,a){var n,o,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.name,o=a.about,e.next=3,y({url:"/api/category/update",method:"PUT",body:JSON.stringify({id:t,data:{name:n,about:o}})});case 3:return c=e.sent,e.abrupt("return",c.category);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ne=function(){var e=Object(c.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y({url:"/api/category/delete",method:"DELETE",body:JSON.stringify({id:t})});case 2:return a=e.sent,e.abrupt("return",a.category);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re=a(559),oe=a(549),ce=function(e){Object(f.a)(a,e);var t=Object(p.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return u.a.createElement(re.a,{active:!0,inverted:!0},u.a.createElement(oe.a,{size:"massive",inverted:!0}))}}]),a}(u.a.Component),le=a(124),ue=a.n(le),ie=a(58),se=function(){var e=Object(c.a)(r.a.mark((function e(t){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("image",t),e.next=4,y({url:"/api/image/register",method:"POST",type:null,body:a});case 4:return n=e.sent,e.abrupt("return",n.image);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),me=function(e){var t=e.buttonText,a=void 0===t?"Choose photo":t,n=e.types,r=void 0===n?[".png",".bmp",".jpg",".jpeg"]:n,o=e.onChange,c=e.setLoading,i=e.startUploaded,s=void 0!==i&&i,m=Object(l.createRef)(),d=Object(l.useState)("No image"),f=Object(T.a)(d,2),p=f[0],h=f[1],g=Object(l.useState)(s),b=Object(T.a)(g,2),E=b[0],v=b[1];return u.a.createElement(u.a.Fragment,null,u.a.createElement(Z.a,{color:E?"green":"grey",style:{marginBottom:10}},p),u.a.createElement(j.a.Group,{fluid:!0},u.a.createElement(j.a,{color:"teal",size:"large",onClick:function(){return m.current.click()},style:{marginBottom:10},type:"button"},u.a.createElement(ie.a,{name:"image"}),a),u.a.createElement(j.a,{content:"Delete image",negative:!0,onClick:function(){o(null),h("No image"),v(!1)},style:{marginBottom:10},type:"button",disabled:!E})),u.a.createElement("input",{type:"file",style:{display:"none"},ref:m,accept:r.join(", "),onChange:function(e){e.target.files[0]?(c(!0),se(e.target.files[0]).then((function(e){var t=e._id;o(t),h("Your image is uploaded!"),c(!1),v(!0)}))):(o(null),h("No image"),v(!1))}}))},de=a(126),fe=function(e){var t=e.onChange,a=Object(de.a)(e,["onChange"]),n=Object(l.useState)(!0),r=Object(T.a)(n,2),o=r[0],c=r[1];return u.a.createElement(N.a.Input,Object.assign({type:"email",icon:"at",iconPosition:"left",fluid:!0,error:!o,onChange:function(e){t(e),c(I.a.isEmail(e.target.value))}},a))},pe=function(e){var t=e.onChangeCode,a=e.onChangeVal,n=e.valPlaceholder,r=e.codePlaceholder,o=e.codeDef,c=void 0===o?"":o,i=e.valDef,s=void 0===i?"":i,m=Object(l.useState)(""),d=Object(T.a)(m,2),f=d[0],p=d[1],h=Object(l.useState)(""),g=Object(T.a)(h,2),b=g[0],E=g[1];return u.a.createElement(N.a.Group,null,u.a.createElement(N.a.Input,{width:7,error:!!b&&!(b.startsWith("+")&&b.length>=2&&b.length<=4),onChange:function(e){t(e),E(e.target.value)},placeholder:r,defaultValue:c}),u.a.createElement(N.a.Input,{width:7,error:!!f&&!/^[0-9]{9}$/.test(f),onChange:function(e){a(e),p(e.target.value)},placeholder:n,defaultValue:s}))};function he(e){if(Array.isArray(e))for(var t=0;t<e.length;t++){var a=e[t];if(""===a||null===a||void 0===a)e.splice(e.indexOf(a),1),t--;else if(Array.isArray(a)||"object"===typeof a){he(a)[0]&&(Array.isArray(e)?e.splice(e.indexOf(a),1):delete e[t])}}else if("object"===typeof e&&null!==e)for(var n=0,r=Object.entries(e);n<r.length;n++){var o=Object(T.a)(r[n],2),c=o[0],l=o[1];if(""===l||null===l||void 0===l)delete e[c];else if(Array.isArray(l)||"object"===typeof l){he(l)[0]&&(Array.isArray(e)?e.splice(e.indexOf(l),1):delete e[c])}}return[e.length?0===e.length:0===Object.keys(e).length,e]}var ge=function(e){var t=e.categories,a=Object(l.useState)(""),n=Object(T.a)(a,2),o=n[0],i=n[1],s=Object(l.useState)(""),m=Object(T.a)(s,2),d=m[0],f=m[1],p=Object(l.useState)(""),h=Object(T.a)(p,2),g=h[0],b=h[1],E=Object(l.useState)(""),v=Object(T.a)(E,2),O=v[0],y=v[1],w=Object(l.useState)(""),C=Object(T.a)(w,2),k=C[0],S=C[1],x=Object(l.useState)(t[0]._id),A=Object(T.a)(x,2),I=A[0],P=A[1],D=Object(l.useState)([]),B=Object(T.a)(D,2),F=B[0],z=B[1],V=Object(l.useState)([]),L=Object(T.a)(V,2),q=L[0],_=L[1],G=Object(l.useState)(""),J=Object(T.a)(G,2),M=J[0],W=J[1],H=Object(l.useState)(""),Y=Object(T.a)(H,2),R=Y[0],X=Y[1],Z=Object(l.useState)(""),$=Object(T.a)(Z,2),Q=$[0],ee=$[1],te=Object(l.useState)(""),ae=Object(T.a)(te,2),ne=ae[0],re=ae[1],oe=Object(l.useState)(""),ce=Object(T.a)(oe,2),le=ce[0],ue=ce[1],ie=Object(l.useState)(""),se=Object(T.a)(ie,2),de=se[0],ge=se[1],be=Object(l.useState)(""),Ee=Object(T.a)(be,2),ve=Ee[0],Oe=Ee[1],je=Object(l.useState)(""),ye=Object(T.a)(je,2),we=ye[0],Ce=ye[1],ke=Object(l.useState)(""),Se=Object(T.a)(ke,2),xe=Se[0],Te=Se[1],Ne=Object(l.useState)(!1),Ae=Object(T.a)(Ne,2),Ie=Ae[0],Pe=Ae[1],De=Object(l.useState)(""),Be=Object(T.a)(De,2),Fe=Be[0],ze=Be[1],Ve=Object(l.useState)(!1),Le=Object(T.a)(Ve,2),qe=Le[0],_e=Le[1],Ge=t.map((function(e){return{key:e._id,value:e._id,text:e.name}})),Je=function(){var e=Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _e(!0),t=he({firstName:o,lastName:d,mainTelephone:{code:g,value:O},mainEmail:k,category:I,emails:F,telephones:q,who:R,about:Q,messangers:{telegram:ne,viber:le,whatsapp:de,instagram:xe,twitter:we,facebook:ve},favorite:Ie,photo:Fe})[1],M&&(t.birthDate=new Date(new Date(M).getFullYear(),new Date(M).getMonth(),new Date(M).getDate())),e.next=5,U(t);case 5:_e(!1),window.location.reload();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return u.a.createElement(N.a,{onSubmit:Je},u.a.createElement(N.a.Group,null,u.a.createElement(N.a.Input,{width:7,fluid:!0,icon:"users",iconPosition:"left",onChange:function(e){return i(e.target.value)},placeholder:"First name"}),u.a.createElement(N.a.Input,{width:7,fluid:!0,icon:"users",iconPosition:"left",onChange:function(e){return f(e.target.value)},placeholder:"Last name"})),u.a.createElement(pe,{onChangeCode:function(e){return b(e.target.value)},codePlaceholder:"Main telephone code",onChangeVal:function(e){return y(e.target.value)},valPlaceholder:"Main telephone value"}),q.map((function(e,t){return u.a.createElement(pe,{key:t,onChangeCode:function(e){return q[t].code=e.target.value},onChangeVal:function(e){return q[t].value=e.target.value},codePlaceholder:"Tel #"+(t+2)+" code",valPlaceholder:"Tel #"+(t+2)+" value",valDef:e.value,codeDef:e.code})})),u.a.createElement(j.a,{fluid:!0,positive:!0,disabled:q.length>9,onClick:function(){return q.length<=10?_([].concat(Object(K.a)(q),[{code:"",value:""}])):null},style:{marginBottom:10},type:"button"},"+ Add telephone"),u.a.createElement(fe,{onChange:function(e){return S(e.target.value)},placeholder:"Main email"}),F.map((function(e,t){return u.a.createElement(fe,{key:t,onChange:function(e){return F[t]=e.target.value},placeholder:"Email #"+(t+2),defaultValue:e})})),u.a.createElement(j.a,{fluid:!0,positive:!0,disabled:F.length>9,onClick:function(){return F.length<=10?z([].concat(Object(K.a)(F),[""])):null},style:{marginBottom:10},type:"button"},"+ Add email"),u.a.createElement(N.a.Select,{options:Ge,onChange:function(e,t){return P(t.value)},defaultValue:I}),u.a.createElement(N.a.Input,{fluid:!0,onChange:function(e){return X(e.target.value)},placeholder:"Who"}),u.a.createElement(N.a.TextArea,{onChange:function(e){return ee(e.target.value)},placeholder:"About"}),u.a.createElement(N.a.Group,{style:{width:"100%"}},u.a.createElement(N.a.Input,{width:5,fluid:!0,placeholder:"Telegram",onChange:function(e){return re(e.target.value)}}),u.a.createElement(N.a.Input,{width:5,fluid:!0,placeholder:"Viber",onChange:function(e){return ue(e.target.value)}}),u.a.createElement(N.a.Input,{width:5,fluid:!0,placeholder:"Whatsapp",onChange:function(e){return ge(e.target.value)}})),u.a.createElement(N.a.Group,null,u.a.createElement(N.a.Input,{width:5,fluid:!0,placeholder:"Facebook",onChange:function(e){return Oe(e.target.value)}}),u.a.createElement(N.a.Input,{width:5,fluid:!0,placeholder:"Twitter",onChange:function(e){return Ce(e.target.value)}}),u.a.createElement(N.a.Input,{width:5,fluid:!0,placeholder:"Instagram",onChange:function(e){return Te(e.target.value)}})),u.a.createElement(N.a.Input,{fluid:!0,type:"date",placeholder:"Birth date",onChange:function(e,t){return W(t.value)}}),u.a.createElement(N.a.Checkbox,{label:"Favorite",onChange:function(e,t){return Pe(t.checked)},toggle:!0}),u.a.createElement(me,{buttonText:"Choose contact photo",onChange:function(e){return ze(e)},setLoading:_e}),u.a.createElement(j.a,{fluid:!0,primary:!0,type:"submit",size:"large",loading:qe,disabled:!(g&&O)},"Add contact"))},be=function(e){var t=e.categories;return u.a.createElement(b.a,{textAlign:"center",verticalAlign:"middle"},u.a.createElement(b.a.Column,{style:{maxWidth:500}},u.a.createElement(V,{noImage:!0}),u.a.createElement(E.a,{color:"olive",size:"large"},"Add contact to your book"),u.a.createElement(v.a,null,u.a.createElement(ge,{categories:t}))))},Ee=a(558),ve=function(e){var t=e.defs,a=e.id,n=Object(l.useState)(t.name||""),o=Object(T.a)(n,2),i=o[0],s=o[1],m=Object(l.useState)(t.about||""),d=Object(T.a)(m,2),f=d[0],p=d[1],h=Object(l.useState)(!1),g=Object(T.a)(h,2),b=g[0],E=g[1],v=function(){var e=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i&&!b){e.next=2;break}return e.abrupt("return");case 2:return E(!0),e.next=5,ae(a,{name:i,about:f});case 5:E(!1),window.location.reload();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return u.a.createElement(N.a,{onSubmit:v},u.a.createElement(N.a.Input,{fluid:!0,icon:"id card outline",iconPosition:"left",placeholder:"Name",onChange:function(e){return s(e.target.value)},defaultValue:i}),u.a.createElement(N.a.TextArea,{fluid:"true",placeholder:"About",onChange:function(e){return p(e.target.value)},defaultValue:f}),u.a.createElement(j.a,{fluid:!0,primary:!0,type:"submit",loading:b,disabled:!i},"Update category"))},Oe=Object(D.b)((function(e){return{user:e.profile.profile}}))((function(e){var t=e.category,a=e.user,n=function(){var e=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===t.contactsCount){e.next=2;break}return e.abrupt("return",alert("Change category from "+t.name+" to another in "+t.contactsCount+" contact"+(1!==t.contactsCount?"s":"")+" and then try again. Good luck!\nPRO TIP: use filter"));case 2:return e.next=4,ne(t._id);case 4:window.location.reload();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return u.a.createElement(v.a,null,u.a.createElement(b.a,{columns:"4",textAlign:"center",verticalAlign:"middle"},u.a.createElement(b.a.Column,null,u.a.createElement(E.a,null,t.name)),u.a.createElement(b.a.Column,null,u.a.createElement(Ee.a,{size:"tiny",value:t.contactsCount,label:"contact"+(1!==t.contactsCount?"s":"")})),u.a.createElement(b.a.Column,null,t.about),a._id===t.user?u.a.createElement(b.a.Column,null,u.a.createElement(j.a.Group,null,u.a.createElement(q.a,{openOnTriggerClick:!0,closeIcon:!0,trigger:u.a.createElement(j.a,{icon:"refresh",color:"yellow"})},u.a.createElement(q.a.Header,null,"Update ",t.name," category"),u.a.createElement(q.a.Content,null,u.a.createElement(ve,{defs:t,id:t._id}))),u.a.createElement(q.a,{openOnTriggerClick:!0,closeIcon:!0,trigger:u.a.createElement(j.a,{icon:"trash",negative:!0})},u.a.createElement(q.a.Header,null,"Are you sure?"),u.a.createElement(q.a.Content,null,"Are you sure about deleting ",t.name," category?"),u.a.createElement(q.a.Actions,null,u.a.createElement(j.a,{negative:!0,onClick:n},"Yes"))))):""))})),je=function(){var e=Object(l.useState)(""),t=Object(T.a)(e,2),a=t[0],n=t[1],o=Object(l.useState)(!0),i=Object(T.a)(o,2),s=i[0],m=i[1],d=Object(l.useState)(""),f=Object(T.a)(d,2),p=f[0],h=f[1],g=Object(l.useState)(!1),b=Object(T.a)(g,2),E=b[0],v=b[1],O=function(){var e=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a&&s&&!E){e.next=2;break}return e.abrupt("return");case 2:return v(!0),e.next=5,te(he({name:a,about:p})[1]);case 5:v(!1),window.location.reload();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return u.a.createElement(N.a,{onSubmit:O},u.a.createElement(N.a.Input,{fluid:!0,icon:"id card outline",iconPosition:"left",placeholder:"Name",onChange:function(e){return t=e.target.value,m(!0),void n(t);var t},onBlur:function(){return m(Boolean(a))},error:!s}),u.a.createElement(N.a.TextArea,{fluid:"true",placeholder:"About",onChange:function(e){return h(e.target.value)}}),u.a.createElement(j.a,{fluid:!0,primary:!0,type:"submit",loading:E},"Add category"))},ye=function(e){var t=e.categories;return u.a.createElement(u.a.Fragment,null,t.map((function(e){return u.a.createElement(Oe,{category:e,key:e._id})})),u.a.createElement(je,null))},we=a(555),Ce=function(e){Object(f.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(m.a)(this,a),(e=t.call(this)).state={requested:!1,birthdays:[]},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.state.requested||H().then((function(t){return e.setState({requested:!0,birthdays:t})}))}},{key:"render",value:function(){if(this.state.requested){return u.a.createElement(v.a,{textAlign:"center",style:{backgroundBlendMode:"overlay",backgroundImage:"url('https://i.pinimg.com/474x/7a/bb/e0/7abbe0f43c47ba3340053bd825251995--neon-lights-party-glow-party.jpg')",backgroundColor:"#000B"}},u.a.createElement(E.a,{size:"large",color:"olive"},"Coming birthdays"),u.a.createElement(we.a,null,this.state.birthdays.length>0?this.state.birthdays.map((function(e){return u.a.createElement(we.a.Item,{key:e._id},u.a.createElement(E.a,{size:"small",color:"green"},function(e){return e.firstName||e.lastName?(e.firstName||"")+" "+(e.lastName||""):e.mainTelephone.code+e.mainTelephone.value}(e),u.a.createElement(E.a.Subheader,{style:{color:"yellow"}},e.birthdayStr)))})):u.a.createElement(E.a,{size:"medium",style:{color:"white"}},"No birthdays")))}return""}}]),a}(u.a.Component),ke=function(e){Object(f.a)(a,e);var t=Object(p.a)(a);function a(e){var n,r=e.filterDefs;return Object(m.a)(this,a),(n=t.call(this)).state={requested:!1,categories:null},n.newFilter=r||{},n.addContactTrigger=Object(l.createRef)(),n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.state.requested||ee().then((function(t){return e.setState({requested:!0,categories:t})}))}},{key:"toTop",value:function(){var e=setInterval((function(){window.scrollY<=10&&clearInterval(e),window.scrollBy(0,-20)}),10)}},{key:"render",value:function(){var e=this;if(!this.state.requested)return u.a.createElement(ce,null);var t=this.state.categories,a=[{key:"",value:"",text:"-"}].concat(Object(K.a)(t.map((function(e){return{key:e.name,value:e.name,text:e.name}}))));return u.a.createElement(b.a,{columns:"2"},u.a.createElement(b.a.Column,null,u.a.createElement(v.a,{style:{maxWidth:300,backgroundColor:"black"}},u.a.createElement(N.a,{onSubmit:function(){return window.location.href=window.location.origin+"?"+ue.a.stringify(e.newFilter)}},u.a.createElement(N.a.Input,{fluid:!0,icon:"users",iconPosition:"left",placeholder:"First name",onChange:function(t){return e.newFilter.firstName=t.target.value},defaultValue:this.newFilter.firstName||""}),u.a.createElement(N.a.Input,{fluid:!0,icon:"users",iconPosition:"left",placeholder:"Last name",onChange:function(t){return e.newFilter.lastName=t.target.value},defaultValue:this.newFilter.lastName||""}),u.a.createElement(N.a.Input,{fluid:!0,icon:"at",iconPosition:"left",placeholder:"Email",onChange:function(t){return e.newFilter.mainEmail=t.target.value},defaultValue:this.newFilter.mainEmail||""}),u.a.createElement(Q.a,{fluid:!0,placeholder:"Select category",options:a,onChange:function(t,a){return e.newFilter.category=a.value},style:{marginBottom:10},defaultValue:this.newFilter.category||null}),u.a.createElement(j.a.Group,{fluid:!0,size:"large"},u.a.createElement(j.a,{primary:!0,type:"submit"},"Filter contacts"),u.a.createElement(j.a.Or,null),u.a.createElement(j.a,{secondary:!0,inverted:!0,onClick:function(){e.newFilter={},window.location.href="/"}},"Reset filter")))),u.a.createElement(j.a.Group,null,u.a.createElement(j.a,{icon:"angle up",positive:!0,onClick:this.toTop}),u.a.createElement(j.a.Or,null),u.a.createElement(q.a,{openOnTriggerClick:!0,closeIcon:!0,trigger:u.a.createElement(j.a,{primary:!0},"Add contact")},u.a.createElement(q.a.Header,null,"Add contact"),u.a.createElement(q.a.Content,null,u.a.createElement(be,{categories:t}))),u.a.createElement(j.a.Or,null),u.a.createElement(q.a,{openOnTriggerClick:!0,closeIcon:!0,trigger:u.a.createElement(j.a,{secondary:!0},"View categories")},u.a.createElement(q.a.Header,null,"All categories"),u.a.createElement(q.a.Content,null,u.a.createElement(ye,{categories:t}))))),u.a.createElement(b.a.Column,null,u.a.createElement(Ce,null)))}}]),a}(u.a.Component),Se=Object(D.b)((function(){return{}}),(function(e){return{onContactClick:function(t){return function(){return e(F(t))}}}}))((function(e){var t=e.contacts,a=e.onContactClick,n=e.filterDefs;return u.a.createElement(b.a,{columns:"2"},u.a.createElement(b.a.Column,null,t.length>0?u.a.createElement(u.a.Fragment,null,t.map((function(e){return u.a.createElement($,{key:e._id,contact:e,onClick:a})}))):u.a.createElement(v.a,null,u.a.createElement(E.a,{size:"huge",textAlign:"center"},"Oops! No contacts found!"))),u.a.createElement(b.a.Column,{stretched:!0},u.a.createElement(X.a,{offset:50},u.a.createElement(ke,{filterDefs:n}))))})),xe=function(e){var t=e.categories,a=e.id,n=e.defs;n.birthDate&&(n.birthDate=new Date(n.birthDate));var i,s,m=Object(l.useState)(n.firstName||""),d=Object(T.a)(m,2),f=d[0],p=d[1],h=Object(l.useState)(n.lastName||""),g=Object(T.a)(h,2),b=g[0],E=g[1],v=Object(l.useState)(n.mainTelephone&&n.mainTelephone.code||""),O=Object(T.a)(v,2),y=O[0],w=O[1],C=Object(l.useState)(n.mainTelephone&&n.mainTelephone.value||""),k=Object(T.a)(C,2),S=k[0],x=k[1],A=Object(l.useState)(n.mainEmail||""),I=Object(T.a)(A,2),P=I[0],D=I[1],B=Object(l.useState)(n.category._id||t[0]._id),F=Object(T.a)(B,2),z=F[0],V=F[1],L=Object(l.useState)(n.emails||[]),q=Object(T.a)(L,2),_=q[0],G=q[1],J=Object(l.useState)(n.telephones?n.telephones.map((function(e){return{code:e.code,value:e.value}})):[]),M=Object(T.a)(J,2),U=M[0],H=M[1],Y=function(e){return e>=10?e:"0"+String(e)},R=Object(l.useState)(n.birthDate||""),X=Object(T.a)(R,2),Z=X[0],$=X[1],Q=Object(l.useState)(n.who||""),ee=Object(T.a)(Q,2),te=ee[0],ae=ee[1],ne=Object(l.useState)(n.about||""),re=Object(T.a)(ne,2),oe=re[0],ce=re[1],le=Object(l.useState)(n.messangers&&n.messangers.telegram||""),ue=Object(T.a)(le,2),ie=ue[0],se=ue[1],de=Object(l.useState)(n.messangers&&n.messangers.viber||""),he=Object(T.a)(de,2),ge=he[0],be=he[1],Ee=Object(l.useState)(n.messangers&&n.messangers.whatsapp||""),ve=Object(T.a)(Ee,2),Oe=ve[0],je=ve[1],ye=Object(l.useState)(n.messangers&&n.messangers.facebook||""),we=Object(T.a)(ye,2),Ce=we[0],ke=we[1],Se=Object(l.useState)(n.messangers&&n.messangers.twitter||""),xe=Object(T.a)(Se,2),Te=xe[0],Ne=xe[1],Ae=Object(l.useState)(n.messangers&&n.messangers.instagram||""),Ie=Object(T.a)(Ae,2),Pe=Ie[0],De=Ie[1],Be=Object(l.useState)(n.favorite||!1),Fe=Object(T.a)(Be,2),ze=Fe[0],Ve=Fe[1],Le=Object(l.useState)(n.photo&&n.photo._id||""),qe=Object(T.a)(Le,2),_e=qe[0],Ge=qe[1],Je=Object(l.useState)(!1),Me=Object(T.a)(Je,2),Ue=Me[0],We=Me[1],He=t.map((function(e){return{key:e._id,value:e._id,text:e.name}})),Ye=function(){var e=Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return We(!0),(t=Object(o.a)(Object(o.a)({firstName:f,lastName:b,mainTelephone:{code:y,value:S},mainEmail:P,category:z,emails:_,telephones:U},Z?{birthDate:new Date(new Date(Z).getFullYear(),new Date(Z).getMonth(),new Date(Z).getDate())}:{}),{},{who:te,about:oe,messangers:{telegram:ie,viber:ge,whatsapp:Oe,instagram:Pe,twitter:Te,facebook:Ce},favorite:ze})).photo=_e||"",e.next=5,W(a,t);case 5:We(!1),window.location.reload();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return n.birthDate&&(i=new Date(n.birthDate.getFullYear(),n.birthDate.getMonth()+1,n.birthDate.getDate())),u.a.createElement(N.a,{onSubmit:Ye},u.a.createElement(N.a.Group,null,u.a.createElement(N.a.Input,{width:7,fluid:!0,icon:"users",iconPosition:"left",onChange:function(e){return p(e.target.value)},placeholder:"First name",defaultValue:f}),u.a.createElement(N.a.Input,{width:7,fluid:!0,icon:"users",iconPosition:"left",onChange:function(e){return E(e.target.value)},placeholder:"Last name",defaultValue:b})),u.a.createElement(pe,{onChangeCode:function(e){return w(e.target.value)},codePlaceholder:"Main telephone code",onChangeVal:function(e){return x(e.target.value)},valPlaceholder:"Main telephone value",valDef:S,codeDef:y}),U.map((function(e,t){return u.a.createElement(pe,{key:t,onChangeCode:function(e){return U[t].code=e.target.value},onChangeVal:function(e){return U[t].value=e.target.value},codePlaceholder:"Tel #"+(t+2)+" code",valPlaceholder:"Tel #"+(t+2)+" value",valDef:e.value,codeDef:e.code})})),u.a.createElement(j.a,{fluid:!0,positive:!0,disabled:U.length>9,onClick:function(){return U.length<=10?H([].concat(Object(K.a)(U),[{code:"",value:""}])):null},style:{marginBottom:10},type:"button"},"+ Add telephone"),u.a.createElement(fe,{onChange:function(e){return D(e.target.value)},placeholder:"Main email",defaultValue:P}),_.map((function(e,t){return u.a.createElement(fe,{key:t,onChange:function(e){return _[t]=e.target.value},placeholder:"Email #"+(t+2),defaultValue:e})})),u.a.createElement(j.a,{fluid:!0,positive:!0,disabled:_.length>9,onClick:function(){return _.length<=10?G([].concat(Object(K.a)(_),[""])):null},style:{marginBottom:10},type:"button"},"+ Add email"),u.a.createElement(N.a.Select,{options:He,onChange:function(e,t){return V(t.value)},defaultValue:z}),u.a.createElement(N.a.Input,{fluid:!0,onChange:function(e){return ae(e.target.value)},placeholder:"Who",defaultValue:te}),u.a.createElement(N.a.TextArea,{onChange:function(e){return ce(e.target.value)},placeholder:"About",defaultValue:oe}),u.a.createElement(N.a.Group,{style:{width:"100%"}},u.a.createElement(N.a.Input,{width:5,fluid:!0,placeholder:"Telegram",onChange:function(e){return se(e.target.value)},defaultValue:ie}),u.a.createElement(N.a.Input,{width:5,fluid:!0,placeholder:"Viber",onChange:function(e){return be(e.target.value)},defaultValue:ge}),u.a.createElement(N.a.Input,{width:5,fluid:!0,placeholder:"Whatsapp",onChange:function(e){return je(e.target.value)},defaultValue:Oe})),u.a.createElement(N.a.Group,null,u.a.createElement(N.a.Input,{width:5,fluid:!0,placeholder:"Facebook",onChange:function(e){return ke(e.target.value)},defaultValue:Ce}),u.a.createElement(N.a.Input,{width:5,fluid:!0,placeholder:"Twitter",onChange:function(e){return Ne(e.target.value)},defaultValue:Te}),u.a.createElement(N.a.Input,{width:5,fluid:!0,placeholder:"Instagram",onChange:function(e){return De(e.target.value)},defaultValue:Pe})),u.a.createElement(N.a.Input,{fluid:!0,type:"date",label:"Birth date",labelPosition:"left",placeholder:"Birth date",onChange:function(e,t){return $(t.value)},defaultValue:n.birthDate?(s=i.getFullYear(),(s>=999?s:"0".repeat(4-s.length)+String(s))+"-"+Y(i.getMonth())+"-"+Y(i.getDate())):""}),u.a.createElement(N.a.Checkbox,{label:"Favorite",onChange:function(e,t){return Ve(t.checked)},checked:ze,toggle:!0}),u.a.createElement(me,{buttonText:"Choose new contact photo",onChange:function(e){return Ge(e)},setLoading:We,startUploaded:!0}),u.a.createElement(j.a,{fluid:!0,primary:!0,type:"submit",size:"large",loading:Ue,disabled:!(y&&S)},"Update contact"))},Te=function(e){var t=e.categories,a=e.id,n=e.defs;return u.a.createElement(b.a,{textAlign:"center",verticalAlign:"middle"},u.a.createElement(b.a.Column,{style:{maxWidth:500}},u.a.createElement(V,{noImage:!0}),u.a.createElement(E.a,{color:"olive",size:"large"},"Update contact in your book"),u.a.createElement(v.a,null,u.a.createElement(xe,{categories:t,id:a,defs:n}))))},Ne=a(551),Ae=a(269),Ie=a.n(Ae),Pe=a(166),De=function(e){var t=e.id,a=Object(l.useState)(""),n=Object(T.a)(a,2),o=n[0],i=n[1],s=Object(l.useState)(!0),m=Object(T.a)(s,2),d=m[0],f=m[1],p=Object(l.useState)(!1),h=Object(T.a)(p,2),g=h[0],b=h[1],E=function(){var e=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o&&d){e.next=2;break}return e.abrupt("return");case 2:return b(!0),e.next=5,R(t,o);case 5:b(!1),window.location.reload();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=window.location.origin+"/shared/"+t;return u.a.createElement(q.a,{closeIcon:!0,openOnTriggerClick:!0,trigger:u.a.createElement(j.a,{positive:!0},u.a.createElement(ie.a,{name:"share alternate"}),"Share")},u.a.createElement(q.a.Header,null,"Share a contact with person"),u.a.createElement(q.a.Content,null,u.a.createElement(N.a.Input,{fluid:!0,value:v,action:u.a.createElement(Ie.a,{text:v,onCopy:function(){Pe.NotificationManager.success("Link copied to the clipboard","Copied!",2e3)}},u.a.createElement(j.a,{color:"teal"},u.a.createElement(ie.a,{name:"copy"}),"Copy link to the contact"))}),u.a.createElement(Pe.NotificationContainer,null),u.a.createElement(Ne.a,{horizontal:!0},"or"),u.a.createElement(N.a,{onSubmit:E},u.a.createElement(N.a.Input,{icon:"at",fluid:!0,iconPosition:"left",placeholder:"Email, on which you would like to send a message about sharing",onChange:function(e){return t=e.target.value,i(t),void f(!0);var t},onBlur:function(){return f(I.a.isEmail(o))},error:!d}),u.a.createElement(j.a,{type:"submit",positive:!0,disabled:!o,loading:g},"Share!"))))},Be=Object(D.b)((function(e){return{contact:e.contacts.expanded}}),(function(e){return{Close:function(){return e(F(null))}}}))((function(e){var t=e.contact,a=e.Close,n=e.isNew,o=Object(l.useRef)(),i=Object(l.useRef)();return Object(l.useEffect)((function(){Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.current){e.next=5;break}return e.next=3,ee();case 3:o.current=e.sent,i.current=!0;case 5:case"end":return e.stop()}}),e)})))()})),t?u.a.createElement(q.a,{onClose:a,dimmer:"blurring",centered:!1,open:!0,closeIcon:!0},u.a.createElement(q.a.Header,null,(t.firstName||"")+" "+(t.lastName||"")+(t.who&&" - "+t.who||"")),u.a.createElement(q.a.Content,null,u.a.createElement(b.a,{columns:"4"},u.a.createElement(b.a.Column,null,t.mainEmail?u.a.createElement("p",null,"Email:",u.a.createElement("a",{href:"mailto:"+t.mainEmail}," "+t.mainEmail)):"",t.mainTelephone?u.a.createElement("p",null,"Telephone:",u.a.createElement("a",{href:"tel:"+t.mainTelephone.code+t.mainTelephone.value}," "+t.mainTelephone.code+t.mainTelephone.value)):"",t.favorite?u.a.createElement(Z.a,{color:"yellow"},"Favorite"):"",u.a.createElement(Z.a,{color:"green"},t.category.name)),u.a.createElement(b.a.Column,null,t.telephones&&t.telephones.map((function(e,t){return u.a.createElement("p",{key:t},u.a.createElement("a",{href:"tel:"+e.code+e.value},e.code+e.value))}))),u.a.createElement(b.a.Column,null,t.emails&&t.emails.map((function(e,t){return u.a.createElement("p",{key:t},u.a.createElement("a",{href:"mailto:"+e},e))}))),u.a.createElement(b.a.Column,null,t.messangers?u.a.createElement(u.a.Fragment,null,t.messangers.telegram?u.a.createElement("div",null,"Telegram: ",t.messangers.telegram):"",t.messangers.viber?u.a.createElement("div",null,"Viber: ",t.messangers.viber):"",t.messangers.whatsapp?u.a.createElement("div",null,"Whatsapp: ",t.messangers.whatsapp):"",t.messangers.facebook?u.a.createElement("div",null,"Facebook: ",t.messangers.facebook):"",t.messangers.instagram?u.a.createElement("div",null,"Instagram: ",t.messangers.instagram):"",t.messangers.twitter?u.a.createElement("div",null,"Twitter: ",t.messangers.twitter):""):"")),u.a.createElement("div",{style:{whiteSpace:"pre-wrap",margin:10}},t.about),u.a.createElement(z.a,{circular:!0,centered:!0,size:"small",src:t.photo.url,alt:"Photo"})),u.a.createElement(q.a.Actions,null,n?u.a.createElement(j.a.Group,null,u.a.createElement(j.a,{positive:!0,onClick:Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U(he({firstName:t.firstName,lastName:t.lastName,mainTelephone:t.mainTelephone,mainEmail:t.mainEmail,category:t.category._id,emails:t.emails,telephones:t.telephones?t.telephones.map((function(e){return{code:e.code,value:e.value}})):null,who:t.who,about:t.about,messangers:t.messangers,favorite:t.favorite,birthDate:t.birthDate,photo:t.photo?t.photo._id:null})[1]);case 2:window.location.href="/";case 3:case"end":return e.stop()}}),e)})))},"Accept"),u.a.createElement(j.a.Or,null),u.a.createElement(j.a,{negative:!0,onClick:Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.location.href="/";case 1:case"end":return e.stop()}}),e)})))},"Exit")):u.a.createElement(j.a.Group,null,u.a.createElement(j.a,{positive:!0,compact:!0,onClick:a},"Close"),i.current?u.a.createElement(q.a,{openOnTriggerClick:!0,closeIcon:!0,trigger:u.a.createElement(j.a,{color:"yellow",compact:!0},"Update")},u.a.createElement(q.a.Header,null,"Update contact"),u.a.createElement(q.a.Content,null,u.a.createElement(Te,{id:t._id,categories:o.current,defs:t}))):"",u.a.createElement(q.a,{openOnTriggerClick:!0,closeIcon:!0,trigger:u.a.createElement(j.a,{negative:!0,icon:"trash",compact:!0})},u.a.createElement(q.a.Header,null,"Are you sure?"),u.a.createElement(q.a.Content,null,"Are you sure want to delete this contact?"),u.a.createElement(q.a.Actions,null,u.a.createElement(j.a,{negative:!0,onClick:Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y(t._id);case 2:window.location.reload();case 3:case"end":return e.stop()}}),e)})))},"Yes"))),u.a.createElement(De,{id:t._id})))):""})),Fe=function(e){Object(f.a)(a,e);var t=Object(p.a)(a);function a(e){var n,r=e.newExpanded,o=void 0!==r&&r,c=e.query,l=void 0===c?void 0:c;return Object(m.a)(this,a),(n=t.call(this)).query=l,n.newExpanded=o,n.state={requested:!1,contacts:[]},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.state.requested||J().then((function(t){return e.setState({requested:!0,contacts:t})}))}},{key:"render",value:function(){var e;document.title="Contact Book";var t=void 0!==this.query?this.query:this.props.location.search,a=ue.a.parse(t.slice(1,t.length));if(a){var n=a.firstName,r=void 0===n?"":n,o=a.lastName,c=void 0===o?"":o,l=a.mainEmail,i=void 0===l?"":l,s=a.category,m=void 0===s?"":s;e=this.state.contacts.filter((function(e){return!r||e.firstName.toLowerCase().includes(r.toLowerCase())})).filter((function(e){return!c||e.lastName.toLowerCase().includes(c.toLowerCase())})).filter((function(e){return!i||e.mainEmail.toLowerCase().includes(i.toLowerCase())})).filter((function(e){return!m||e.category.name.toLowerCase().includes(m.toLowerCase())}))}else e=this.state.contacts;return u.a.createElement(u.a.Fragment,null,u.a.createElement(G,null),u.a.createElement(Se,{contacts:e,filterDefs:a}),u.a.createElement(Be,{isNew:this.newExpanded}))}}]),a}(u.a.Component),ze=function(e){var t=e.authorized,a=e.component,n=Object(de.a)(e,["authorized","component"]);return t?u.a.createElement(h.a,Object.assign({component:a},n)):u.a.createElement(h.a,{component:function(){return u.a.createElement(u.a.Fragment,null,window.location.href="/login")}})},Ve=function(e){var t=e.register,a=e.set,n=Object(l.useState)(""),i=Object(T.a)(n,2),s=i[0],m=i[1],d=Object(l.useState)(""),f=Object(T.a)(d,2),p=f[0],h=f[1],g=Object(l.useState)(""),b=Object(T.a)(g,2),E=b[0],v=b[1],O=Object(l.useState)(""),y=Object(T.a)(O,2),w=y[0],C=y[1],k=Object(l.useState)(null),S=Object(T.a)(k,2),x=S[0],A=S[1],P=Object(l.useState)(!0),D=Object(T.a)(P,2),B=D[0],F=D[1],z=Object(l.useState)(!0),V=Object(T.a)(z,2),L=V[0],q=V[1],_=Object(l.useState)(!1),G=Object(T.a)(_,2),J=G[0],M=G[1],U=function(){var e=Object(c.a)(r.a.mark((function e(){var n,c,l,u,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=E&&w,B&&L&&n&&!J){e.next=4;break}return e.abrupt("return");case 4:return M(!0),c=s?{firstName:s}:{},l=p?{lastName:p}:{},u=x?{photo:x}:{},e.next=10,t(Object(o.a)(Object(o.a)(Object(o.a)({email:E,password:w},l),c),u));case 10:i=e.sent,M(!1),i.message?alert(i.message):i.user&&(localStorage.setItem("user",JSON.stringify(i.user)),a(i.user),window.location.href="/");case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return document.title="Contact Book | Sign up",u.a.createElement(N.a,{onSubmit:U},u.a.createElement(N.a.Input,{type:"text",fluid:!0,iconPosition:"left",icon:"users",placeholder:"First name",onChange:function(e){return m(e.target.value)}}),u.a.createElement(N.a.Input,{type:"text",fluid:!0,iconPosition:"left",icon:"users",placeholder:"Last name",onChange:function(e){return h(e.target.value)}}),u.a.createElement(N.a.Input,{icon:"at",type:"email",iconPosition:"left",placeholder:"Email",error:!B,fluid:!0,onChange:function(e){return t=e.target.value,v(t),void F(!0);var t},onBlur:function(){return F(I.a.isEmail(E))}}),u.a.createElement(Z.a,{style:{marginBottom:10},color:w.length>=6?"green":"grey"},"Password must be at least 6 characters long"),u.a.createElement(N.a.Input,{icon:"lock",type:"password",iconPosition:"left",placeholder:"Password",error:!L,fluid:!0,onChange:function(e){return t=e.target.value,C(t),void q(!0);var t},onBlur:function(){return q(Boolean(w&&w.length>=6))}}),u.a.createElement(me,{buttonText:"Choose profile photo",onChange:function(e){return A(e)},setLoading:M}),u.a.createElement("div",{style:{marginBottom:10}},"Don't worry, if your image does not load. Just wait for a several minutes"),u.a.createElement(j.a,{color:"teal",size:"large",fluid:!0,primary:!0,type:"submit",loading:J,disabled:!Boolean(w&&E&&B)||!(w.length>=6)},"Sign up"))},Le=Object(D.b)((function(){return{}}),(function(e){return{setProfile:function(t){return e(B(t))}}}))((function(e){var t=e.setProfile;return u.a.createElement(b.a,{textAlign:"center",verticalAlign:"middle",className:"fill"},u.a.createElement(b.a.Column,{style:{maxWidth:450}},u.a.createElement(V,null),u.a.createElement(E.a,{as:"h2",color:"olive"},"Sign up to Contact Book"),u.a.createElement(v.a,null,u.a.createElement(Ve,{register:C,set:t})),u.a.createElement(O.a,null,u.a.createElement(O.a.Header,null,"Already with us?"),u.a.createElement(O.a.Content,null,u.a.createElement(j.a,{onClick:function(){return window.location.href="/login"},compact:!0,size:"small",color:"teal",style:{marginTop:10}},"Log in")))))})),qe=function(e){var t=e.update,a=e.set,n=e.defs,o=Object(l.useState)(n.firstName||""),i=Object(T.a)(o,2),s=i[0],m=i[1],d=Object(l.useState)(n.lastName||""),f=Object(T.a)(d,2),p=f[0],h=f[1],g=Object(l.useState)(n.email||""),b=Object(T.a)(g,2),E=b[0],v=b[1],y=Object(l.useState)(null),w=Object(T.a)(y,2),C=w[0],k=w[1],S=Object(l.useState)(n.photo&&n.photo._id||""),x=Object(T.a)(S,2),A=x[0],P=x[1],D=Object(l.useState)(!0),B=Object(T.a)(D,2),F=B[0],z=B[1],V=Object(l.useState)(!1),L=Object(T.a)(V,2),q=L[0],_=L[1],G=Object(l.useState)(!1),J=Object(T.a)(G,2),M=J[0],U=J[1],W=Object(l.useState)(""),H=Object(T.a)(W,2),Y=H[0],R=H[1],X=function(){var e=Object(c.a)(r.a.mark((function e(){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(F&&q&&E&&C&&!M){e.next=3;break}return e.abrupt("return");case 3:return U(!0),e.next=6,t({email:E,password:C,lastName:p,firstName:s,photo:A||""});case 6:n=e.sent,U(!1),n.message?R(n.message):n.user&&(localStorage.setItem("user",JSON.stringify(n.user)),a(n.user),window.location.href="/");case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return document.title="Contact Book | Update profile",u.a.createElement(N.a,{onSubmit:X},u.a.createElement(N.a.Input,{type:"text",fluid:!0,iconPosition:"left",icon:"users",placeholder:"First name",onChange:function(e){return m(e.target.value)},defaultValue:s}),u.a.createElement(N.a.Input,{type:"text",fluid:!0,iconPosition:"left",icon:"users",placeholder:"Last name",onChange:function(e){return h(e.target.value)},defaultValue:p}),u.a.createElement(N.a.Input,{icon:"at",type:"email",iconPosition:"left",placeholder:"Email",error:!F,fluid:!0,onChange:function(e){return t=e.target.value,v(t),void z(!0);var t},onBlur:function(){return z(I.a.isEmail(E))},defaultValue:E}),u.a.createElement(N.a.Input,{icon:"lock",type:"password",iconPosition:"left",placeholder:"Password",error:!q,fluid:!0,onChange:function(e){return t=e.target.value,k(t),void _(!0);var t},onBlur:function(){return _(Boolean(C&&C.length>=6))},defaultValue:C}),u.a.createElement(me,{buttonText:"Choose profile photo",onChange:function(e){return P(e)},setLoading:U,startUploaded:!0}),u.a.createElement(j.a.Group,{fluid:!0},u.a.createElement(j.a,{color:"teal",size:"large",primary:!0,type:"submit",loading:M,disabled:!Boolean(E&&C&&F)||!(!C||C.length>=6)},"Update my profile"),u.a.createElement(j.a,{color:"teal",size:"large",secondary:!0,type:"button",onClick:function(){return window.location.href="/"}},"Cancel")),Y?u.a.createElement(O.a,{negative:!0,style:{display:"block"}},u.a.createElement(O.a.Header,null,"Error!"),u.a.createElement(O.a.Content,null,Y)):"")},_e=Object(D.b)((function(e){return{defs:e.profile.profile}}),(function(e){return{setProfile:function(t){return e(B(t))}}}))((function(e){var t=e.setProfile,a=e.defs;return u.a.createElement(b.a,{textAlign:"center",verticalAlign:"middle",className:"fill"},u.a.createElement(b.a.Column,{style:{maxWidth:450}},u.a.createElement(V,null),u.a.createElement(E.a,{as:"h2",color:"olive"},"Update your Contact Book profile"),u.a.createElement(v.a,null,u.a.createElement(qe,{update:k,set:t,defs:a}))))})),Ge=function(){return document.body.style.backgroundColor="black",u.a.createElement(b.a,{centered:!0,columns:"1",textAlign:"center",verticalAlign:"middle",className:"fill"},u.a.createElement(b.a.Column,{style:{maxWidth:450}},u.a.createElement(E.a,{color:"red",size:"huge",textAlign:"center",inverted:!0},"404 Page not found"),u.a.createElement(j.a,{positive:!0,compact:!0,size:"massive",fluid:!0,onClick:function(){return window.location.href="/"}},"Back, to home")))},Je=function(e){Object(f.a)(a,e);var t=Object(p.a)(a);function a(e){var n,r=e.setContact;return Object(m.a)(this,a),(n=t.call(this)).setContact=r,n.state={requested:!1},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;if(!this.state.requested){var t=this.props.match.params.id;M(t).then((function(t){e.setContact(t),e.setState({requested:!0})}))}}},{key:"render",value:function(){return this.state.requested?u.a.createElement(Fe,{newExpanded:!0,query:this.props.location.search}):u.a.createElement(ce,null)}}]),a}(u.a.Component),Me=Object(D.b)((function(e){return{}}),(function(e){return{setContact:function(t){return e(F(t))}}}))(Je),Ue=function(e){Object(f.a)(a,e);var t=Object(p.a)(a);function a(e){var n,r=e.user;return Object(m.a)(this,a),(n=t.call(this)).history=Object(g.a)(),n.user=r,n.state={requested:!1,user:null},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("user");if(t&&this.user.profile){if(!this.state.requested){var a=JSON.parse(t).email;x(a).then((function(t){localStorage.setItem("user",JSON.stringify(t.user)),e.setState({requested:!0,user:t.user})}))}}else this.setState({requested:!0,user:null})}},{key:"render",value:function(){return this.state.requested?u.a.createElement(h.b,{history:this.history},u.a.createElement(h.c,null,u.a.createElement(h.a,{exact:!0,component:L,path:"/login"}),u.a.createElement(h.a,{exaxt:!0,component:Le,path:"/register"}),u.a.createElement(ze,{exact:!0,authorized:Boolean(this.state.user)||!1,component:Fe,path:"/"}),u.a.createElement(ze,{exact:!0,authorized:Boolean(this.state.user)||!1,component:_e,path:"/update"}),u.a.createElement(ze,{authorized:Boolean(this.state.user)||!1,component:Me,path:"/shared/:id"}),u.a.createElement(h.a,{path:"*",exact:!0,component:Ge}))):u.a.createElement(ce,null)}}]),a}(u.a.Component),We=Object(D.b)((function(e){return{user:e.profile}}))(Ue),He=a(93),Ye=Object(He.b)({profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PROFILE:SET":return Object(o.a)(Object(o.a)({},e),{},{profile:t.profile});default:return e}},contacts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"EXP_CONTACT:SET":return Object(o.a)(Object(o.a)({},e),{},{expanded:t.contact});default:return e}}}),Re=localStorage.getItem("user"),Xe=Object(He.c)(Ye,{contacts:{expanded:null},profile:{profile:Re?JSON.parse(Re):void 0}}),Ze=function(e){Object(f.a)(a,e);var t=Object(p.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return u.a.createElement(D.a,{store:Xe},u.a.createElement(We,null))}}]),a}(u.a.Component),$e=(a(537),a(538),a(539),window.fetch);window.fetch=function(){var e=Object(c.a)(r.a.mark((function e(t,a){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(n=localStorage.getItem("token"))&&n.startsWith('"')?n.slice(1,-1):n,a.headers=a.headers?Object(o.a)(Object(o.a)({},a.headers),{},{Authorization:"Bearer "+n}):{Authorization:"Bearer "+n},e.next=5,$e("https://contact-book.tk"+t,a);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),s.a.render(u.a.createElement(Ze,null),document.getElementById("root"))}},[[281,1,2]]]);
//# sourceMappingURL=main.4f9babc1.chunk.js.map