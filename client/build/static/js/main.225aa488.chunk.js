(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{273:function(e,t,a){e.exports=a(514)},513:function(e,t,a){},514:function(e,t,a){"use strict";a.r(t);var n=a(10),r=a.n(n),c=a(25),l=a(17),o=a(0),u=a.n(o),i=a(45),s=a.n(i),m=a(31),d=a(32),f=a(34),p=a(33),g=a(48),h=a(262),b=a(534),E=a(533),v=a(535),O=a(529),j=a(530),y=function(){var e=Object(l.a)(r.a.mark((function e(t){var a,n,l,o,u,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.method,n=t.url,l=t.body,o=t.type,u=void 0===o?"application/json":o,e.next=3,fetch(n,Object(c.a)({method:a,headers:Object(c.a)({},u?{"Content-Type":u}:{})},l?{body:l}:{})).then((function(e){return e.json()}));case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(l.a)(r.a.mark((function e(t){var a,n,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,n=t.password,e.next=3,y({method:"POST",url:"/api/user/login",body:JSON.stringify({email:a,password:n})});case 3:return c=e.sent,e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(l.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y({method:"POST",url:"/api/user/register",body:JSON.stringify(t)});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(l.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y({method:"PUT",url:"/api/user/update",body:JSON.stringify(t)});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(l.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y({method:"POST",url:"/api/user/logout"});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(l.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y({method:"GET",url:"/api/user/exists?email=".concat(t)});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=a(7),T=a(525),I=a(54),N=a.n(I),P=function(e){var t=e.login,a=e.set,n=Object(o.useState)(""),c=Object(A.a)(n,2),i=c[0],s=c[1],m=Object(o.useState)(""),d=Object(A.a)(m,2),f=d[0],p=d[1],g=Object(o.useState)(!0),h=Object(A.a)(g,2),b=h[0],E=h[1],v=Object(o.useState)(!0),O=Object(A.a)(v,2),y=O[0],w=O[1],C=Object(o.useState)(!1),k=Object(A.a)(C,2),S=k[0],x=k[1],I=function(){var e=Object(l.a)(r.a.mark((function e(){var n,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=b&&y,i&&f&&n&&!S){e.next=3;break}return e.abrupt("return");case 3:return x(!0),e.next=6,t({email:i,password:f});case 6:c=e.sent,x(!1),c.message?alert(c.message):c.user&&(localStorage.setItem("user",JSON.stringify(c.user)),localStorage.setItem("token",c.token),a(c.user),window.location.href="/");case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return u.a.createElement(T.a,{onSubmit:I},u.a.createElement(T.a.Input,{icon:"at",type:"email",iconPosition:"left",placeholder:"Email",error:!b,fluid:!0,onChange:function(e){return t=e.target.value,s(t),void E(!0);var t},onBlur:function(){return E(N.a.isEmail(i))}}),u.a.createElement(T.a.Input,{icon:"lock",type:"password",iconPosition:"left",placeholder:"Password",error:!y,fluid:!0,onChange:function(e){return t=e.target.value,p(t),void w(!0);var t},onBlur:function(){return w(Boolean(f))}}),u.a.createElement(j.a,{color:"teal",size:"large",fluid:!0,primary:!0,type:"submit",loading:S,disabled:!Boolean(i&&f)},"Log in"))},B=a(22),D=function(e){return{type:"PROFILE:SET",profile:e}},V=function(e){return{type:"EXP_CONTACT:SET",contact:e}},F=a(263),z=function(e){var t=e.noImage,a=void 0!==t&&t;return u.a.createElement(E.a,{as:"h2",color:"teal",size:"huge",style:{marginBottom:50}},a?"":u.a.createElement(F.a,{src:"http://s1.iconbird.com/ico/2013/7/390/w256h2561372777054AddressBook.png",alt:"book"}),u.a.createElement("br",null),"Contact Book",u.a.createElement(E.a.Subheader,null,"A notebook for your contacts"))},L=Object(B.b)((function(){return{}}),(function(e){return{setProfile:function(t){return e(D(t))}}}))((function(e){var t=e.setProfile;return document.title="Contact Book | Log in",u.a.createElement(b.a,{textAlign:"center",verticalAlign:"middle",className:"fill"},u.a.createElement(b.a.Column,{style:{maxWidth:450}},u.a.createElement(z,null),u.a.createElement(E.a,{as:"h2",color:"olive"},"Log in to your account"),u.a.createElement(v.a,null,u.a.createElement(P,{login:w,set:t})),u.a.createElement(O.a,null,u.a.createElement(O.a.Header,null,"New to us?"),u.a.createElement(O.a.Content,null,u.a.createElement(j.a,{onClick:function(){return window.location.href="/register"},compact:!0,size:"mini",color:"teal",style:{marginTop:10}},"Sign up")))))})),_=a(526),G=Object(B.b)((function(e){return{user:e.profile.profile}}))((function(e){var t=e.user;return u.a.createElement(v.a,null,u.a.createElement(E.a,{textAlign:"center",size:"huge"},"Your Contact Book profile info"),u.a.createElement(b.a,{columns:"2",textAlign:"center",verticalAlign:"middle"},u.a.createElement(b.a.Column,null,t.firstName?u.a.createElement("p",null,"First name: ",t.firstName):"",t.lastName?u.a.createElement("p",null,"Last name: ",t.lastName):""),u.a.createElement(b.a.Column,null,u.a.createElement("p",null,"Email: ",t.email))),u.a.createElement(F.a,{centered:!0,circular:!0,src:t.photo.url,alt:"Profile photo"}))})),J=Object(B.b)((function(e){return{user:e.profile.profile}}))((function(e){var t=e.user;return u.a.createElement(b.a,{centered:!0,columns:"2",style:{padding:"1em 0",backgroundColor:"white"},verticalAlign:"middle"},u.a.createElement(b.a.Column,{textAlign:"center",verticalAlign:"middle"},u.a.createElement(E.a,null,u.a.createElement(F.a,{src:t.photo.url,circular:!0,size:"massive",alt:"Profile avatar"})," ",t.firstName&&(t.lastName,1)?t.firstName+" "+(t.lastName||""):t.email)),u.a.createElement(b.a.Column,{textAlign:"center",verticalAlign:"middle"},u.a.createElement(j.a.Group,null,u.a.createElement(j.a,{icon:"sign out alternate",color:"red",size:"large",onClick:function(){S().then((function(){localStorage.clear(),window.location.reload()}))}}),u.a.createElement(j.a,{icon:"refresh",color:"yellow",size:"large",onClick:function(){return window.location.href="/update"}}),u.a.createElement(_.a,{openOnTriggerClick:!0,closeIcon:!0,dimmer:"blurring",trigger:u.a.createElement(j.a,{icon:"info",positive:!0,size:"large"})},u.a.createElement(_.a.Header,null,"Profile"),u.a.createElement(_.a.Content,null,u.a.createElement(G,null))))))})),q=function(){var e=Object(l.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y({url:"/api/contact",method:"GET"});case 2:return t=e.sent,e.abrupt("return",t.contacts);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=Object(l.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y({url:"/api/contact/register",method:"POST",body:JSON.stringify(t)});case 2:return a=e.sent,e.abrupt("return",a.contact);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(l.a)(r.a.mark((function e(t,a){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y({url:"/api/contact/update",method:"PUT",body:JSON.stringify({id:t,data:a})});case 2:return n=e.sent,e.abrupt("return",n.contact);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),W=function(){var e=Object(l.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y({url:"/api/contact/birthdays",method:"GET"});case 2:return t=e.sent,e.abrupt("return",t.contacts);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=Object(l.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y({url:"/api/contact/delete",method:"DELETE",body:JSON.stringify({id:t})});case 2:return a=e.sent,e.abrupt("return",a.contact);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=a(524),Y=a(125),X=function(e){var t=e.contact,a=e.onClick;return u.a.createElement(v.a,{onClick:a(t),style:{backgroundColor:t.favorite?"yellow":"while"}},u.a.createElement(b.a,{textAlign:"center",verticalAlign:"middle",columns:"3"},u.a.createElement(b.a.Column,null,u.a.createElement(b.a,{columns:"2",verticalAlign:"middle"},u.a.createElement(b.a.Column,null,u.a.createElement(F.a,{src:t.photo.url,alt:"Contact photo",circular:!0,size:"tiny"})),u.a.createElement(b.a.Column,null,u.a.createElement(E.a,null,(t.firstName||"")+" "+(t.lastName||""))))),u.a.createElement(b.a.Column,null,u.a.createElement(Y.a,{color:"green"},t.category.name),t.who?u.a.createElement(Y.a,{color:"red"},t.who):"")))},$=a(57),K=a(522),Q=function(){var e=Object(l.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y({url:"/api/category",method:"GET"});case 2:return t=e.sent,e.abrupt("return",t.categories);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=Object(l.a)(r.a.mark((function e(t){var a,n,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.name,n=t.about,e.next=3,y({url:"/api/category/register",method:"POST",body:JSON.stringify({name:a,about:n})});case 3:return c=e.sent,e.abrupt("return",c.category);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ee=function(){var e=Object(l.a)(r.a.mark((function e(t,a){var n,c,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.name,c=a.about,e.next=3,y({url:"/api/category/update",method:"PUT",body:JSON.stringify({id:t,data:{name:n,about:c}})});case 3:return l=e.sent,e.abrupt("return",l.category);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),te=function(){var e=Object(l.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y({url:"/api/category/delete",method:"DELETE",body:JSON.stringify({id:t})});case 2:return a=e.sent,e.abrupt("return",a.category);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ae=a(532),ne=a(523),re=function(e){Object(f.a)(a,e);var t=Object(p.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return u.a.createElement(ae.a,{active:!0,inverted:!0},u.a.createElement(ne.a,{size:"massive",inverted:!0}))}}]),a}(u.a.Component),ce=a(124),le=a.n(ce),oe=a(58),ue=function(){var e=Object(l.a)(r.a.mark((function e(t){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("image",t),e.next=4,y({url:"/api/image/register",method:"POST",type:null,body:a});case 4:return n=e.sent,e.abrupt("return",n.image);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ie=function(e){var t=e.buttonText,a=void 0===t?"Choose photo":t,n=e.types,r=void 0===n?[".png",".bmp",".jpg",".jpeg"]:n,c=e.onChange,l=e.setLoading,i=e.startUploaded,s=void 0!==i&&i,m=Object(o.createRef)(),d=Object(o.useState)("No image"),f=Object(A.a)(d,2),p=f[0],g=f[1],h=Object(o.useState)(s),b=Object(A.a)(h,2),E=b[0],v=b[1];return u.a.createElement(u.a.Fragment,null,u.a.createElement(Y.a,{color:E?"green":"grey",style:{marginBottom:10}},p),u.a.createElement(j.a.Group,{fluid:!0},u.a.createElement(j.a,{color:"teal",size:"large",onClick:function(){return m.current.click()},style:{marginBottom:10},type:"button"},u.a.createElement(oe.a,{name:"image"}),a),u.a.createElement(j.a,{content:"Delete image",negative:!0,onClick:function(){c(null),g("No image"),v(!1)},style:{marginBottom:10},type:"button",disabled:!E})),u.a.createElement("input",{type:"file",style:{display:"none"},ref:m,accept:r.join(", "),onChange:function(e){e.target.files[0]?(l(!0),ue(e.target.files[0]).then((function(e){var t=e._id;c(t),g("Your image is uploaded!"),l(!1),v(!0)}))):(c(null),g("No image"),v(!1))}}))},se=a(126),me=function(e){var t=e.onChange,a=Object(se.a)(e,["onChange"]),n=Object(o.useState)(!0),r=Object(A.a)(n,2),c=r[0],l=r[1];return u.a.createElement(T.a.Input,Object.assign({type:"email",icon:"at",iconPosition:"left",fluid:!0,error:!c,onChange:function(e){t(e),l(N.a.isEmail(e.target.value))}},a))},de=function(e){var t=e.onChangeCode,a=e.onChangeVal,n=e.valPlaceholder,r=e.codePlaceholder,c=e.codeDef,l=void 0===c?"":c,i=e.valDef,s=void 0===i?"":i,m=Object(o.useState)(""),d=Object(A.a)(m,2),f=d[0],p=d[1],g=Object(o.useState)(""),h=Object(A.a)(g,2),b=h[0],E=h[1];return u.a.createElement(T.a.Group,null,u.a.createElement(T.a.Input,{width:7,error:!!b&&!(b.startsWith("+")&&b.length>=2&&b.length<=4),onChange:function(e){t(e),E(e.target.value)},placeholder:r,defaultValue:l}),u.a.createElement(T.a.Input,{width:7,error:!!f&&!/^[0-9]{9}$/.test(f),onChange:function(e){a(e),p(e.target.value)},placeholder:n,defaultValue:s}))};function fe(e){if(Array.isArray(e))for(var t=0;t<e.length;t++){var a=e[t];if(""===a||null===a||void 0===a)e.splice(e.indexOf(a),1),t--;else if(Array.isArray(a)||"object"===typeof a){fe(a)[0]&&(Array.isArray(e)?e.splice(e.indexOf(a),1):delete e[t])}}else if("object"===typeof e&&null!==e)for(var n=0,r=Object.entries(e);n<r.length;n++){var c=Object(A.a)(r[n],2),l=c[0],o=c[1];if(""===o||null===o||void 0===o)delete e[l];else if(Array.isArray(o)||"object"===typeof o){fe(o)[0]&&(Array.isArray(e)?e.splice(e.indexOf(o),1):delete e[l])}}return[e.length?0===e.length:0===Object.keys(e).length,e]}var pe=function(e){var t=e.categories,a=Object(o.useState)(""),n=Object(A.a)(a,2),c=n[0],i=n[1],s=Object(o.useState)(""),m=Object(A.a)(s,2),d=m[0],f=m[1],p=Object(o.useState)(""),g=Object(A.a)(p,2),h=g[0],b=g[1],E=Object(o.useState)(""),v=Object(A.a)(E,2),O=v[0],y=v[1],w=Object(o.useState)(""),C=Object(A.a)(w,2),k=C[0],S=C[1],x=Object(o.useState)(t[0]._id),I=Object(A.a)(x,2),N=I[0],P=I[1],B=Object(o.useState)([]),D=Object(A.a)(B,2),V=D[0],F=D[1],z=Object(o.useState)([]),L=Object(A.a)(z,2),_=L[0],G=L[1],J=Object(o.useState)(""),q=Object(A.a)(J,2),M=q[0],W=q[1],H=Object(o.useState)(""),R=Object(A.a)(H,2),Y=R[0],X=R[1],K=Object(o.useState)(""),Q=Object(A.a)(K,2),Z=Q[0],ee=Q[1],te=Object(o.useState)(""),ae=Object(A.a)(te,2),ne=ae[0],re=ae[1],ce=Object(o.useState)(""),le=Object(A.a)(ce,2),oe=le[0],ue=le[1],se=Object(o.useState)(""),pe=Object(A.a)(se,2),ge=pe[0],he=pe[1],be=Object(o.useState)(""),Ee=Object(A.a)(be,2),ve=Ee[0],Oe=Ee[1],je=Object(o.useState)(""),ye=Object(A.a)(je,2),we=ye[0],Ce=ye[1],ke=Object(o.useState)(""),Se=Object(A.a)(ke,2),xe=Se[0],Ae=Se[1],Te=Object(o.useState)(!1),Ie=Object(A.a)(Te,2),Ne=Ie[0],Pe=Ie[1],Be=Object(o.useState)(""),De=Object(A.a)(Be,2),Ve=De[0],Fe=De[1],ze=Object(o.useState)(!1),Le=Object(A.a)(ze,2),_e=Le[0],Ge=Le[1],Je=t.map((function(e){return{key:e._id,value:e._id,text:e.name}})),qe=function(){var e=Object(l.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ge(!0),t=fe({firstName:c,lastName:d,mainTelephone:{code:h,value:O},mainEmail:k,category:N,emails:V,telephones:_,who:Y,about:Z,messangers:{telegram:ne,viber:oe,whatsapp:ge,instagram:xe,twitter:we,facebook:ve},favorite:Ne,photo:Ve})[1],M&&(t.birthDate=new Date(new Date(M).getFullYear(),new Date(M).getMonth()+1,new Date(M).getDate())),e.next=5,U(t);case 5:Ge(!1),window.location.reload();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return u.a.createElement(T.a,{onSubmit:qe},u.a.createElement(T.a.Group,null,u.a.createElement(T.a.Input,{width:7,fluid:!0,icon:"users",iconPosition:"left",onChange:function(e){return i(e.target.value)},placeholder:"First name"}),u.a.createElement(T.a.Input,{width:7,fluid:!0,icon:"users",iconPosition:"left",onChange:function(e){return f(e.target.value)},placeholder:"Last name"})),u.a.createElement(de,{onChangeCode:function(e){return b(e.target.value)},codePlaceholder:"Main telephone code",onChangeVal:function(e){return y(e.target.value)},valPlaceholder:"Main telephone value"}),_.map((function(e,t){return u.a.createElement(de,{key:t,onChangeCode:function(e){return _[t].code=e.target.value},onChangeVal:function(e){return _[t].value=e.target.value},codePlaceholder:"Tel #"+(t+2)+" code",valPlaceholder:"Tel #"+(t+2)+" value",valDef:e.value,codeDef:e.code})})),u.a.createElement(j.a,{fluid:!0,positive:!0,disabled:_.length>9,onClick:function(){return _.length<=10?G([].concat(Object($.a)(_),[{code:"",value:""}])):null},style:{marginBottom:10},type:"button"},"+ Add telephone"),u.a.createElement(me,{onChange:function(e){return S(e.target.value)},placeholder:"Main email"}),V.map((function(e,t){return u.a.createElement(me,{key:t,onChange:function(e){return V[t]=e.target.value},placeholder:"Email #"+(t+2),defaultValue:e})})),u.a.createElement(j.a,{fluid:!0,positive:!0,disabled:V.length>9,onClick:function(){return V.length<=10?F([].concat(Object($.a)(V),[""])):null},style:{marginBottom:10},type:"button"},"+ Add email"),u.a.createElement(T.a.Select,{options:Je,onChange:function(e,t){return P(t.value)},defaultValue:N}),u.a.createElement(T.a.Input,{fluid:!0,onChange:function(e){return X(e.target.value)},placeholder:"Who"}),u.a.createElement(T.a.TextArea,{onChange:function(e){return ee(e.target.value)},placeholder:"About"}),u.a.createElement(T.a.Group,{style:{width:"100%"}},u.a.createElement(T.a.Input,{width:5,fluid:!0,placeholder:"Telegram",onChange:function(e){return re(e.target.value)}}),u.a.createElement(T.a.Input,{width:5,fluid:!0,placeholder:"Viber",onChange:function(e){return ue(e.target.value)}}),u.a.createElement(T.a.Input,{width:5,fluid:!0,placeholder:"Whatsapp",onChange:function(e){return he(e.target.value)}})),u.a.createElement(T.a.Group,null,u.a.createElement(T.a.Input,{width:5,fluid:!0,placeholder:"Facebook",onChange:function(e){return Oe(e.target.value)}}),u.a.createElement(T.a.Input,{width:5,fluid:!0,placeholder:"Twitter",onChange:function(e){return Ce(e.target.value)}}),u.a.createElement(T.a.Input,{width:5,fluid:!0,placeholder:"Instagram",onChange:function(e){return Ae(e.target.value)}})),u.a.createElement(T.a.Input,{fluid:!0,type:"date",placeholder:"Birth date",onChange:function(e,t){return W(t.value)}}),u.a.createElement(T.a.Checkbox,{label:"Favorite",onChange:function(e,t){return Pe(t.checked)},toggle:!0}),u.a.createElement(ie,{buttonText:"Choose contact photo",onChange:function(e){return Fe(e)},setLoading:Ge}),u.a.createElement(j.a,{fluid:!0,primary:!0,type:"submit",size:"large",loading:_e,disabled:!(h&&O)},"Add contact"))},ge=function(e){var t=e.categories;return u.a.createElement(b.a,{textAlign:"center",verticalAlign:"middle"},u.a.createElement(b.a.Column,{style:{maxWidth:500}},u.a.createElement(z,{noImage:!0}),u.a.createElement(E.a,{color:"olive",size:"large"},"Add contact to your book"),u.a.createElement(v.a,null,u.a.createElement(pe,{categories:t}))))},he=a(531),be=function(e){var t=e.defs,a=e.id,n=Object(o.useState)(t.name||""),c=Object(A.a)(n,2),i=c[0],s=c[1],m=Object(o.useState)(t.about||""),d=Object(A.a)(m,2),f=d[0],p=d[1],g=Object(o.useState)(!1),h=Object(A.a)(g,2),b=h[0],E=h[1],v=function(){var e=Object(l.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i&&!b){e.next=2;break}return e.abrupt("return");case 2:return E(!0),e.next=5,ee(a,{name:i,about:f});case 5:E(!1),window.location.reload();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return u.a.createElement(T.a,{onSubmit:v},u.a.createElement(T.a.Input,{fluid:!0,icon:"id card outline",iconPosition:"left",placeholder:"Name",onChange:function(e){return s(e.target.value)},defaultValue:i}),u.a.createElement(T.a.TextArea,{fluid:"true",placeholder:"About",onChange:function(e){return p(e.target.value)},defaultValue:f}),u.a.createElement(j.a,{fluid:!0,primary:!0,type:"submit",loading:b,disabled:!i},"Update category"))},Ee=Object(B.b)((function(e){return{user:e.profile.profile}}))((function(e){var t=e.category,a=e.user,n=function(){var e=Object(l.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===t.contactsCount){e.next=2;break}return e.abrupt("return",alert("Change category from "+t.name+" to another in "+t.contactsCount+" contact"+(1!==t.contactsCount?"s":"")+" and then try again. Good luck!\nPRO TIP: use filter"));case 2:return e.next=4,te(t._id);case 4:window.location.reload();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return u.a.createElement(v.a,null,u.a.createElement(b.a,{columns:"4",textAlign:"center",verticalAlign:"middle"},u.a.createElement(b.a.Column,null,u.a.createElement(E.a,null,t.name)),u.a.createElement(b.a.Column,null,u.a.createElement(he.a,{size:"tiny",value:t.contactsCount,label:"contact"+(1!==t.contactsCount?"s":"")})),u.a.createElement(b.a.Column,null,t.about),a._id===t.user?u.a.createElement(b.a.Column,null,u.a.createElement(j.a.Group,null,u.a.createElement(_.a,{openOnTriggerClick:!0,closeIcon:!0,trigger:u.a.createElement(j.a,{icon:"refresh",color:"yellow"})},u.a.createElement(_.a.Header,null,"Update ",t.name," category"),u.a.createElement(_.a.Content,null,u.a.createElement(be,{defs:t,id:t._id}))),u.a.createElement(_.a,{openOnTriggerClick:!0,closeIcon:!0,trigger:u.a.createElement(j.a,{icon:"trash",negative:!0})},u.a.createElement(_.a.Header,null,"Are you sure?"),u.a.createElement(_.a.Content,null,"Are you sure about deleting ",t.name," category?"),u.a.createElement(_.a.Actions,null,u.a.createElement(j.a,{negative:!0,onClick:n},"Yes"))))):""))})),ve=function(){var e=Object(o.useState)(""),t=Object(A.a)(e,2),a=t[0],n=t[1],c=Object(o.useState)(!0),i=Object(A.a)(c,2),s=i[0],m=i[1],d=Object(o.useState)(""),f=Object(A.a)(d,2),p=f[0],g=f[1],h=Object(o.useState)(!1),b=Object(A.a)(h,2),E=b[0],v=b[1],O=function(){var e=Object(l.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a&&s&&!E){e.next=2;break}return e.abrupt("return");case 2:return v(!0),e.next=5,Z(fe({name:a,about:p})[1]);case 5:v(!1),window.location.reload();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return u.a.createElement(T.a,{onSubmit:O},u.a.createElement(T.a.Input,{fluid:!0,icon:"id card outline",iconPosition:"left",placeholder:"Name",onChange:function(e){return t=e.target.value,m(!0),void n(t);var t},onBlur:function(){return m(Boolean(a))},error:!s}),u.a.createElement(T.a.TextArea,{fluid:"true",placeholder:"About",onChange:function(e){return g(e.target.value)}}),u.a.createElement(j.a,{fluid:!0,primary:!0,type:"submit",loading:E},"Add category"))},Oe=function(e){var t=e.categories;return u.a.createElement(u.a.Fragment,null,t.map((function(e){return u.a.createElement(Ee,{category:e,key:e._id})})),u.a.createElement(ve,null))},je=a(528),ye=function(e){Object(f.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(m.a)(this,a),(e=t.call(this)).state={requested:!1,birthdays:[]},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.state.requested||W().then((function(t){return e.setState({requested:!0,birthdays:t})}))}},{key:"render",value:function(){if(this.state.requested){return u.a.createElement(v.a,{textAlign:"center",style:{backgroundBlendMode:"overlay",backgroundImage:"url('https://i.pinimg.com/474x/7a/bb/e0/7abbe0f43c47ba3340053bd825251995--neon-lights-party-glow-party.jpg')",backgroundColor:"#000B"}},u.a.createElement(E.a,{size:"large",color:"olive"},"Coming birthdays"),u.a.createElement(je.a,null,this.state.birthdays.length>0?this.state.birthdays.map((function(e){return u.a.createElement(je.a.Item,{key:e._id},u.a.createElement(E.a,{size:"small",color:"green"},function(e){return e.firstName||e.lastName?(e.firstName||"")+" "+(e.lastName||""):e.mainTelephone.code+e.mainTelephone.value}(e),u.a.createElement(E.a.Subheader,{style:{color:"yellow"}},e.birthdayStr)))})):u.a.createElement(E.a,{size:"medium"},"No birthdays")))}return""}}]),a}(u.a.Component),we=function(e){Object(f.a)(a,e);var t=Object(p.a)(a);function a(e){var n,r=e.filterDefs;return Object(m.a)(this,a),(n=t.call(this)).state={requested:!1,categories:null},n.newFilter=r||{},n.addContactTrigger=Object(o.createRef)(),n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.state.requested||Q().then((function(t){return e.setState({requested:!0,categories:t})}))}},{key:"toTop",value:function(){var e=setInterval((function(){window.scrollY<=10&&clearInterval(e),window.scrollBy(0,-20)}),10)}},{key:"render",value:function(){var e=this;if(!this.state.requested)return u.a.createElement(re,null);var t=this.state.categories,a=[{key:"",value:"",text:"-"}].concat(Object($.a)(t.map((function(e){return{key:e.name,value:e.name,text:e.name}}))));return u.a.createElement(b.a,{columns:"2"},u.a.createElement(b.a.Column,null,u.a.createElement(v.a,{style:{maxWidth:300,backgroundColor:"black"}},u.a.createElement(T.a,{onSubmit:function(){return window.location.href=window.location.origin+"?"+le.a.stringify(e.newFilter)}},u.a.createElement(T.a.Input,{fluid:!0,icon:"users",iconPosition:"left",placeholder:"First name",onChange:function(t){return e.newFilter.firstName=t.target.value},defaultValue:this.newFilter.firstName||""}),u.a.createElement(T.a.Input,{fluid:!0,icon:"users",iconPosition:"left",placeholder:"Last name",onChange:function(t){return e.newFilter.lastName=t.target.value},defaultValue:this.newFilter.lastName||""}),u.a.createElement(T.a.Input,{fluid:!0,icon:"at",iconPosition:"left",placeholder:"Email",onChange:function(t){return e.newFilter.mainEmail=t.target.value},defaultValue:this.newFilter.mainEmail||""}),u.a.createElement(K.a,{fluid:!0,placeholder:"Select category",options:a,onChange:function(t,a){return e.newFilter.category=a.value},style:{marginBottom:10},defaultValue:this.newFilter.category||null}),u.a.createElement(j.a.Group,{fluid:!0,size:"large"},u.a.createElement(j.a,{primary:!0,type:"submit"},"Filter contacts"),u.a.createElement(j.a.Or,null),u.a.createElement(j.a,{secondary:!0,inverted:!0,onClick:function(){e.newFilter={},window.location.href="/"}},"Reset filter")))),u.a.createElement(j.a.Group,null,u.a.createElement(j.a,{icon:"angle up",positive:!0,onClick:this.toTop}),u.a.createElement(j.a.Or,null),u.a.createElement(_.a,{openOnTriggerClick:!0,closeIcon:!0,trigger:u.a.createElement(j.a,{primary:!0},"Add contact")},u.a.createElement(_.a.Header,null,"Add contact"),u.a.createElement(_.a.Content,null,u.a.createElement(ge,{categories:t}))),u.a.createElement(j.a.Or,null),u.a.createElement(_.a,{openOnTriggerClick:!0,closeIcon:!0,trigger:u.a.createElement(j.a,{secondary:!0},"View categories")},u.a.createElement(_.a.Header,null,"All categories"),u.a.createElement(_.a.Content,null,u.a.createElement(Oe,{categories:t}))))),u.a.createElement(b.a.Column,null,u.a.createElement(ye,null)))}}]),a}(u.a.Component),Ce=Object(B.b)((function(){return{}}),(function(e){return{onContactClick:function(t){return function(){return e(V(t))}}}}))((function(e){var t=e.contacts,a=e.onContactClick,n=e.filterDefs;return u.a.createElement(b.a,{columns:"2"},u.a.createElement(b.a.Column,null,t.length>0?u.a.createElement(u.a.Fragment,null,t.map((function(e){return u.a.createElement(X,{key:e._id,contact:e,onClick:a})}))):u.a.createElement(v.a,null,u.a.createElement(E.a,{size:"huge",textAlign:"center"},"Oops! No contacts found!"))),u.a.createElement(b.a.Column,{stretched:!0},u.a.createElement(R.a,{offset:50},u.a.createElement(we,{filterDefs:n}))))})),ke=function(e){var t=e.categories,a=e.id,n=e.defs;n.birthDate&&(n.birthDate=new Date(n.birthDate));var i,s=Object(o.useState)(n.firstName||""),m=Object(A.a)(s,2),d=m[0],f=m[1],p=Object(o.useState)(n.lastName||""),g=Object(A.a)(p,2),h=g[0],b=g[1],E=Object(o.useState)(n.mainTelephone&&n.mainTelephone.code||""),v=Object(A.a)(E,2),O=v[0],y=v[1],w=Object(o.useState)(n.mainTelephone&&n.mainTelephone.value||""),C=Object(A.a)(w,2),k=C[0],S=C[1],x=Object(o.useState)(n.mainEmail||""),I=Object(A.a)(x,2),N=I[0],P=I[1],B=Object(o.useState)(n.category._id||t[0]._id),D=Object(A.a)(B,2),V=D[0],F=D[1],z=Object(o.useState)(n.emails||[]),L=Object(A.a)(z,2),_=L[0],G=L[1],J=Object(o.useState)(n.telephones?n.telephones.map((function(e){return{code:e.code,value:e.value}})):[]),q=Object(A.a)(J,2),U=q[0],W=q[1],H=function(e){return e>=10?e:"0"+String(e)},R=Object(o.useState)(n.birthDate||""),Y=Object(A.a)(R,2),X=Y[0],K=Y[1],Q=Object(o.useState)(n.who||""),Z=Object(A.a)(Q,2),ee=Z[0],te=Z[1],ae=Object(o.useState)(n.about||""),ne=Object(A.a)(ae,2),re=ne[0],ce=ne[1],le=Object(o.useState)(n.messangers&&n.messangers.telegram||""),oe=Object(A.a)(le,2),ue=oe[0],se=oe[1],fe=Object(o.useState)(n.messangers&&n.messangers.viber||""),pe=Object(A.a)(fe,2),ge=pe[0],he=pe[1],be=Object(o.useState)(n.messangers&&n.messangers.whatsapp||""),Ee=Object(A.a)(be,2),ve=Ee[0],Oe=Ee[1],je=Object(o.useState)(n.messangers&&n.messangers.facebook||""),ye=Object(A.a)(je,2),we=ye[0],Ce=ye[1],ke=Object(o.useState)(n.messangers&&n.messangers.twitter||""),Se=Object(A.a)(ke,2),xe=Se[0],Ae=Se[1],Te=Object(o.useState)(n.messangers&&n.messangers.instagram||""),Ie=Object(A.a)(Te,2),Ne=Ie[0],Pe=Ie[1],Be=Object(o.useState)(n.favorite||!1),De=Object(A.a)(Be,2),Ve=De[0],Fe=De[1],ze=Object(o.useState)(n.photo&&n.photo._id||""),Le=Object(A.a)(ze,2),_e=Le[0],Ge=Le[1],Je=Object(o.useState)(!1),qe=Object(A.a)(Je,2),Ue=qe[0],Me=qe[1],We=t.map((function(e){return{key:e._id,value:e._id,text:e.name}})),He=function(){var e=Object(l.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Me(!0),(t=Object(c.a)(Object(c.a)({firstName:d,lastName:h,mainTelephone:{code:O,value:k},mainEmail:N,category:V,emails:_,telephones:U},X?{birthDate:new Date(new Date(X).getFullYear(),new Date(X).getMonth()+1,new Date(X).getDate())}:{}),{},{who:ee,about:re,messangers:{telegram:ue,viber:ge,whatsapp:ve,instagram:Ne,twitter:xe,facebook:we},favorite:Ve})).photo=_e||"",e.next=5,M(a,t);case 5:Me(!1),window.location.reload();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return u.a.createElement(T.a,{onSubmit:He},u.a.createElement(T.a.Group,null,u.a.createElement(T.a.Input,{width:7,fluid:!0,icon:"users",iconPosition:"left",onChange:function(e){return f(e.target.value)},placeholder:"First name",defaultValue:d}),u.a.createElement(T.a.Input,{width:7,fluid:!0,icon:"users",iconPosition:"left",onChange:function(e){return b(e.target.value)},placeholder:"Last name",defaultValue:h})),u.a.createElement(de,{onChangeCode:function(e){return y(e.target.value)},codePlaceholder:"Main telephone code",onChangeVal:function(e){return S(e.target.value)},valPlaceholder:"Main telephone value",valDef:k,codeDef:O}),U.map((function(e,t){return u.a.createElement(de,{key:t,onChangeCode:function(e){return U[t].code=e.target.value},onChangeVal:function(e){return U[t].value=e.target.value},codePlaceholder:"Tel #"+(t+2)+" code",valPlaceholder:"Tel #"+(t+2)+" value",valDef:e.value,codeDef:e.code})})),u.a.createElement(j.a,{fluid:!0,positive:!0,disabled:U.length>9,onClick:function(){return U.length<=10?W([].concat(Object($.a)(U),[{code:"",value:""}])):null},style:{marginBottom:10},type:"button"},"+ Add telephone"),u.a.createElement(me,{onChange:function(e){return P(e.target.value)},placeholder:"Main email",defaultValue:N}),_.map((function(e,t){return u.a.createElement(me,{key:t,onChange:function(e){return _[t]=e.target.value},placeholder:"Email #"+(t+2),defaultValue:e})})),u.a.createElement(j.a,{fluid:!0,positive:!0,disabled:_.length>9,onClick:function(){return _.length<=10?G([].concat(Object($.a)(_),[""])):null},style:{marginBottom:10},type:"button"},"+ Add email"),u.a.createElement(T.a.Select,{options:We,onChange:function(e,t){return F(t.value)},defaultValue:V}),u.a.createElement(T.a.Input,{fluid:!0,onChange:function(e){return te(e.target.value)},placeholder:"Who",defaultValue:ee}),u.a.createElement(T.a.TextArea,{onChange:function(e){return ce(e.target.value)},placeholder:"About",defaultValue:re}),u.a.createElement(T.a.Group,{style:{width:"100%"}},u.a.createElement(T.a.Input,{width:5,fluid:!0,placeholder:"Telegram",onChange:function(e){return se(e.target.value)},defaultValue:ue}),u.a.createElement(T.a.Input,{width:5,fluid:!0,placeholder:"Viber",onChange:function(e){return he(e.target.value)},defaultValue:ge}),u.a.createElement(T.a.Input,{width:5,fluid:!0,placeholder:"Whatsapp",onChange:function(e){return Oe(e.target.value)},defaultValue:ve})),u.a.createElement(T.a.Group,null,u.a.createElement(T.a.Input,{width:5,fluid:!0,placeholder:"Facebook",onChange:function(e){return Ce(e.target.value)},defaultValue:we}),u.a.createElement(T.a.Input,{width:5,fluid:!0,placeholder:"Twitter",onChange:function(e){return Ae(e.target.value)},defaultValue:xe}),u.a.createElement(T.a.Input,{width:5,fluid:!0,placeholder:"Instagram",onChange:function(e){return Pe(e.target.value)},defaultValue:Ne})),u.a.createElement(T.a.Input,{fluid:!0,type:"date",placeholder:"Birth date",onChange:function(e,t){return K(t.value)},defaultValue:n.birthDate?(i=n.birthDate.getFullYear(),(i>=999?i:"0".repeat(4-i.length)+String(i))+"-"+H(n.birthDate.getMonth())+"-"+H(n.birthDate.getDate())):""}),u.a.createElement(T.a.Checkbox,{label:"Favorite",onChange:function(e,t){return Fe(t.checked)},checked:Ve,toggle:!0}),u.a.createElement(ie,{buttonText:"Choose new contact photo",onChange:function(e){return Ge(e)},setLoading:Me,startUploaded:!0}),u.a.createElement(j.a,{fluid:!0,primary:!0,type:"submit",size:"large",loading:Ue,disabled:!(O&&k)},"Update contact"))},Se=function(e){var t=e.categories,a=e.id,n=e.defs;return u.a.createElement(b.a,{textAlign:"center",verticalAlign:"middle"},u.a.createElement(b.a.Column,{style:{maxWidth:500}},u.a.createElement(z,{noImage:!0}),u.a.createElement(E.a,{color:"olive",size:"large"},"Update contact in your book"),u.a.createElement(v.a,null,u.a.createElement(ke,{categories:t,id:a,defs:n}))))},xe=Object(B.b)((function(e){return{contact:e.contacts.expanded}}),(function(e){return{Close:function(){return e(V(null))}}}))((function(e){var t=e.contact,a=e.Close,n=Object(o.useRef)(),c=Object(o.useRef)();return Object(o.useEffect)((function(){Object(l.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.current){e.next=5;break}return e.next=3,Q();case 3:n.current=e.sent,c.current=!0;case 5:case"end":return e.stop()}}),e)})))()})),t?u.a.createElement(_.a,{onClose:a,dimmer:"blurring",centered:!1,open:!0,closeIcon:!0},u.a.createElement(_.a.Header,null,(t.firstName||"")+" "+(t.lastName||"")+(t.who&&" - "+t.who||"")),u.a.createElement(_.a.Content,null,u.a.createElement(b.a,{columns:"4"},u.a.createElement(b.a.Column,null,t.mainEmail?u.a.createElement("p",null,"Email:",u.a.createElement("a",{href:"mailto:"+t.mainEmail}," "+t.mainEmail)):"",t.mainTelephone?u.a.createElement("p",null,"Telephone:",u.a.createElement("a",{href:"tel:"+t.mainTelephone.code+t.mainTelephone.value}," "+t.mainTelephone.code+t.mainTelephone.value)):"",t.favorite?u.a.createElement(Y.a,{color:"yellow"},"Favorite"):"",u.a.createElement(Y.a,{color:"green"},t.category.name)),u.a.createElement(b.a.Column,null,t.telephones&&t.telephones.map((function(e,t){return u.a.createElement("p",{key:t},u.a.createElement("a",{href:"tel:"+e.code+e.value},e.code+e.value))}))),u.a.createElement(b.a.Column,null,t.emails&&t.emails.map((function(e,t){return u.a.createElement("p",{key:t},u.a.createElement("a",{href:"mailto:"+e},e))}))),u.a.createElement(b.a.Column,null,t.messangers?u.a.createElement(u.a.Fragment,null,t.messangers.telegram?u.a.createElement("div",null,"Telegram: ",t.messangers.telegram):"",t.messangers.viber?u.a.createElement("div",null,"Viber: ",t.messangers.viber):"",t.messangers.whatsapp?u.a.createElement("div",null,"Whatsapp: ",t.messangers.whatsapp):"",t.messangers.facebook?u.a.createElement("div",null,"Facebook: ",t.messangers.facebook):"",t.messangers.instagram?u.a.createElement("div",null,"Instagram: ",t.messangers.instagram):"",t.messangers.twitter?u.a.createElement("div",null,"Twitter: ",t.messangers.twitter):""):"")),u.a.createElement("div",{style:{whiteSpace:"pre-wrap",margin:10}},t.about),u.a.createElement(F.a,{circular:!0,centered:!0,size:"small",src:t.photo.url,alt:"Photo"})),u.a.createElement(_.a.Actions,null,u.a.createElement(j.a.Group,null,u.a.createElement(j.a,{positive:!0,compact:!0,onClick:a},"Close"),c.current?u.a.createElement(_.a,{openOnTriggerClick:!0,closeIcon:!0,trigger:u.a.createElement(j.a,{color:"yellow",compact:!0},"Update")},u.a.createElement(_.a.Header,null,"Update contact"),u.a.createElement(_.a.Content,null,u.a.createElement(Se,{id:t._id,categories:n.current,defs:t}))):"",u.a.createElement(_.a,{openOnTriggerClick:!0,closeIcon:!0,trigger:u.a.createElement(j.a,{negative:!0,icon:"trash",compact:!0})},u.a.createElement(_.a.Header,null,"Are you sure?"),u.a.createElement(_.a.Content,null,"Are you sure want to delete this contact?"),u.a.createElement(_.a.Actions,null,u.a.createElement(j.a,{negative:!0,onClick:Object(l.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H(t._id);case 2:window.location.reload();case 3:case"end":return e.stop()}}),e)})))},"Yes")))))):""})),Ae=function(e){Object(f.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(m.a)(this,a),(e=t.call(this)).state={requested:!1,contacts:[]},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.state.requested||q().then((function(t){return e.setState({requested:!0,contacts:t})}))}},{key:"render",value:function(){var e;document.title="Contact Book";var t=this.props.location.search,a=le.a.parse(t.slice(1,t.length));if(a){var n=a.firstName,r=void 0===n?"":n,c=a.lastName,l=void 0===c?"":c,o=a.mainEmail,i=void 0===o?"":o,s=a.category,m=void 0===s?"":s;e=this.state.contacts.filter((function(e){return!r||e.firstName.toLowerCase().includes(r.toLowerCase())})).filter((function(e){return!l||e.lastName.toLowerCase().includes(l.toLowerCase())})).filter((function(e){return!i||e.mainEmail.toLowerCase().includes(i.toLowerCase())})).filter((function(e){return!m||e.category.name.toLowerCase().includes(m.toLowerCase())}))}else e=this.state.contacts;return u.a.createElement(u.a.Fragment,null,u.a.createElement(J,null),u.a.createElement(Ce,{contacts:e,filterDefs:a}),u.a.createElement(xe,null))}}]),a}(u.a.Component),Te=function(e){var t=e.authorized,a=e.component,n=Object(se.a)(e,["authorized","component"]);return t?u.a.createElement(g.a,Object.assign({component:a},n)):u.a.createElement(g.a,{component:function(){return u.a.createElement(u.a.Fragment,null,window.location.href="/login")}})},Ie=function(e){var t=e.register,a=e.set,n=Object(o.useState)(""),i=Object(A.a)(n,2),s=i[0],m=i[1],d=Object(o.useState)(""),f=Object(A.a)(d,2),p=f[0],g=f[1],h=Object(o.useState)(""),b=Object(A.a)(h,2),E=b[0],v=b[1],O=Object(o.useState)(""),y=Object(A.a)(O,2),w=y[0],C=y[1],k=Object(o.useState)(null),S=Object(A.a)(k,2),x=S[0],I=S[1],P=Object(o.useState)(!0),B=Object(A.a)(P,2),D=B[0],V=B[1],F=Object(o.useState)(!0),z=Object(A.a)(F,2),L=z[0],_=z[1],G=Object(o.useState)(!1),J=Object(A.a)(G,2),q=J[0],U=J[1],M=function(){var e=Object(l.a)(r.a.mark((function e(){var n,l,o,u,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=E&&w,D&&L&&n&&!q){e.next=4;break}return e.abrupt("return");case 4:return U(!0),l=s?{firstName:s}:{},o=p?{lastName:p}:{},u=x?{photo:x}:{},e.next=10,t(Object(c.a)(Object(c.a)(Object(c.a)({email:E,password:w},o),l),u));case 10:i=e.sent,U(!1),i.message?alert(i.message):i.user&&(localStorage.setItem("user",JSON.stringify(i.user)),localStorage.setItem("token",JSON.stringify(i.token)),a(i.user),window.location.href="/");case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return document.title="Contact Book | Sign up",u.a.createElement(T.a,{onSubmit:M},u.a.createElement(T.a.Input,{type:"text",fluid:!0,iconPosition:"left",icon:"users",placeholder:"First name",onChange:function(e){return m(e.target.value)}}),u.a.createElement(T.a.Input,{type:"text",fluid:!0,iconPosition:"left",icon:"users",placeholder:"Last name",onChange:function(e){return g(e.target.value)}}),u.a.createElement(T.a.Input,{icon:"at",type:"email",iconPosition:"left",placeholder:"Email",error:!D,fluid:!0,onChange:function(e){return t=e.target.value,v(t),void V(!0);var t},onBlur:function(){return V(N.a.isEmail(E))}}),u.a.createElement(Y.a,{style:{marginBottom:10},color:w.length>=6?"green":"grey"},"Password must be at least 6 characters long"),u.a.createElement(T.a.Input,{icon:"lock",type:"password",iconPosition:"left",placeholder:"Password",error:!L,fluid:!0,onChange:function(e){return t=e.target.value,C(t),void _(!0);var t},onBlur:function(){return _(Boolean(w&&w.length>=6))}}),u.a.createElement(ie,{buttonText:"Choose profile photo",onChange:function(e){return I(e)},setLoading:U}),u.a.createElement("div",{style:{marginBottom:10}},"Don't worry, if your image does not load. Just wait for a several minutes"),u.a.createElement(j.a,{color:"teal",size:"large",fluid:!0,primary:!0,type:"submit",loading:q,disabled:!Boolean(w&&E&&D)||!(w.length>=6)},"Sign up"))},Ne=Object(B.b)((function(){return{}}),(function(e){return{setProfile:function(t){return e(D(t))}}}))((function(e){var t=e.setProfile;return u.a.createElement(b.a,{textAlign:"center",verticalAlign:"middle",className:"fill"},u.a.createElement(b.a.Column,{style:{maxWidth:450}},u.a.createElement(z,null),u.a.createElement(E.a,{as:"h2",color:"olive"},"Sign up to Contact Book"),u.a.createElement(v.a,null,u.a.createElement(Ie,{register:C,set:t})),u.a.createElement(O.a,null,u.a.createElement(O.a.Header,null,"Already with us?"),u.a.createElement(O.a.Content,null,u.a.createElement(j.a,{onClick:function(){return window.location.href="/login"},compact:!0,size:"small",color:"teal",style:{marginTop:10}},"Log in")))))})),Pe=function(e){var t=e.update,a=e.set,n=e.defs,c=Object(o.useState)(n.firstName||""),i=Object(A.a)(c,2),s=i[0],m=i[1],d=Object(o.useState)(n.lastName||""),f=Object(A.a)(d,2),p=f[0],g=f[1],h=Object(o.useState)(n.email||""),b=Object(A.a)(h,2),E=b[0],v=b[1],y=Object(o.useState)(null),w=Object(A.a)(y,2),C=w[0],k=w[1],S=Object(o.useState)(n.photo&&n.photo._id||""),x=Object(A.a)(S,2),I=x[0],P=x[1],B=Object(o.useState)(!0),D=Object(A.a)(B,2),V=D[0],F=D[1],z=Object(o.useState)(!1),L=Object(A.a)(z,2),_=L[0],G=L[1],J=Object(o.useState)(!1),q=Object(A.a)(J,2),U=q[0],M=q[1],W=Object(o.useState)(""),H=Object(A.a)(W,2),R=H[0],Y=H[1],X=function(){var e=Object(l.a)(r.a.mark((function e(){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(V&&_&&E&&C&&!U){e.next=3;break}return e.abrupt("return");case 3:return M(!0),e.next=6,t({email:E,password:C,lastName:p,firstName:s,photo:I||""});case 6:n=e.sent,M(!1),n.message?Y(n.message):n.user&&(localStorage.setItem("user",JSON.stringify(n.user)),localStorage.setItem("token",JSON.stringify(n.token)),a(n.user),window.location.href="/");case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return document.title="Contact Book | Update profile",u.a.createElement(T.a,{onSubmit:X},u.a.createElement(T.a.Input,{type:"text",fluid:!0,iconPosition:"left",icon:"users",placeholder:"First name",onChange:function(e){return m(e.target.value)},defaultValue:s}),u.a.createElement(T.a.Input,{type:"text",fluid:!0,iconPosition:"left",icon:"users",placeholder:"Last name",onChange:function(e){return g(e.target.value)},defaultValue:p}),u.a.createElement(T.a.Input,{icon:"at",type:"email",iconPosition:"left",placeholder:"Email",error:!V,fluid:!0,onChange:function(e){return t=e.target.value,v(t),void F(!0);var t},onBlur:function(){return F(N.a.isEmail(E))},defaultValue:E}),u.a.createElement(T.a.Input,{icon:"lock",type:"password",iconPosition:"left",placeholder:"Password",error:!_,fluid:!0,onChange:function(e){return t=e.target.value,k(t),void G(!0);var t},onBlur:function(){return G(Boolean(C&&C.length>=6))},defaultValue:C}),u.a.createElement(ie,{buttonText:"Choose profile photo",onChange:function(e){return P(e)},setLoading:M,startUploaded:!0}),u.a.createElement(j.a.Group,{fluid:!0},u.a.createElement(j.a,{color:"teal",size:"large",primary:!0,type:"submit",loading:U,disabled:!Boolean(E&&C&&V)||!(!C||C.length>=6)},"Update my profile"),u.a.createElement(j.a,{color:"teal",size:"large",secondary:!0,type:"button",onClick:function(){return window.location.href="/"}},"Cancel")),R?u.a.createElement(O.a,{negative:!0,style:{display:"block"}},u.a.createElement(O.a.Header,null,"Error!"),u.a.createElement(O.a.Content,null,R)):"")},Be=Object(B.b)((function(e){return{defs:e.profile.profile}}),(function(e){return{setProfile:function(t){return e(D(t))}}}))((function(e){var t=e.setProfile,a=e.defs;return u.a.createElement(b.a,{textAlign:"center",verticalAlign:"middle",className:"fill"},u.a.createElement(b.a.Column,{style:{maxWidth:450}},u.a.createElement(z,null),u.a.createElement(E.a,{as:"h2",color:"olive"},"Update your Contact Book profile"),u.a.createElement(v.a,null,u.a.createElement(Pe,{update:k,set:t,defs:a}))))})),De=function(){return document.body.style.backgroundColor="black",u.a.createElement(b.a,{centered:!0,columns:"1",textAlign:"center",verticalAlign:"middle",className:"fill"},u.a.createElement(b.a.Column,{style:{maxWidth:450}},u.a.createElement(E.a,{color:"red",size:"huge",textAlign:"center",inverted:!0},"404 Page not found"),u.a.createElement(j.a,{positive:!0,compact:!0,size:"massive",fluid:!0,onClick:function(){return window.location.href="/"}},"Back, to home")))},Ve=function(e){Object(f.a)(a,e);var t=Object(p.a)(a);function a(e){var n,r=e.user;return Object(m.a)(this,a),(n=t.call(this)).history=Object(h.a)(),n.user=r,n.state={requested:!1,exists:!1},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("user");if(t&&this.user.profile){if(!this.state.requested){var a=JSON.parse(t).email;x(a).then((function(t){return e.setState({requested:!0,exists:t.exists})}))}}else this.setState({requested:!0,exists:!1})}},{key:"render",value:function(){return this.state.requested?u.a.createElement(g.b,{history:this.history},u.a.createElement(g.c,null,u.a.createElement(g.a,{exact:!0,component:L,path:"/login"}),u.a.createElement(g.a,{exaxt:!0,component:Ne,path:"/register"}),u.a.createElement(Te,{exact:!0,authorized:this.state.exists||!1,component:Ae,path:"/"}),u.a.createElement(Te,{exact:!0,authorized:this.state.exists||!1,component:Be,path:"/update"}),u.a.createElement(g.a,{path:"*",exact:!0,component:De}))):u.a.createElement(re,null)}}]),a}(u.a.Component),Fe=Object(B.b)((function(e){return{user:e.profile}}))(Ve),ze=a(91),Le=Object(ze.b)({profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PROFILE:SET":return Object(c.a)(Object(c.a)({},e),{},{profile:t.profile});default:return e}},contacts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"EXP_CONTACT:SET":return Object(c.a)(Object(c.a)({},e),{},{expanded:t.contact});default:return e}}}),_e=localStorage.getItem("user"),Ge=Object(ze.c)(Le,{contacts:{expanded:null},profile:{profile:_e?JSON.parse(_e):void 0}}),Je=function(e){Object(f.a)(a,e);var t=Object(p.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return u.a.createElement(B.a,{store:Ge},u.a.createElement(Fe,null))}}]),a}(u.a.Component),qe=(a(512),a(513),window.fetch);window.fetch=function(){var e=Object(l.a)(r.a.mark((function e(t,a){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(n=localStorage.getItem("token"))&&n.startsWith('"')?n.slice(1,-1):n,a.headers=a.headers?Object(c.a)(Object(c.a)({},a.headers),{},{Authorization:"Bearer "+n}):{Authorization:"Bearer "+n},e.next=5,qe("https://contact-book.tk:3001"+t,a);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),s.a.render(u.a.createElement(Je,null),document.getElementById("root"))}},[[273,1,2]]]);
//# sourceMappingURL=main.225aa488.chunk.js.map